<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">
<head>
<!-- GenHTML revision 25226-->
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<title>Securing HTTP Resources - The Java EE 6 Tutorial</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2013-01-01">
<link rel="stylesheet" type="text/css" href="css/default.css">
<link rel="stylesheet" type="text/css" href="css/ipg.css">
<link rel="stylesheet" type="text/css" href="css/javaeetutorial.css">
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>

<body>

<table border="0" cellpadding="5" cellspacing="0" width="100%">
<tbody>
   <tr valign="top">
      <td width="400px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="gexaf.html">Preface</a></p>
<p class="toc level1 tocsp"><a href="gfirp.html">Part&nbsp;I&nbsp;Introduction</a></p>
<p class="toc level2"><a href="bnaaw.html">1.&nbsp;&nbsp;Overview</a></p>
<p class="toc level2"><a href="gfiud.html">2.&nbsp;&nbsp;Using the Tutorial Examples</a></p>
<p class="toc level1 tocsp"><a href="bnadp.html">Part&nbsp;II&nbsp;The Web Tier</a></p>
<p class="toc level2"><a href="bnadr.html">3.&nbsp;&nbsp;Getting Started with Web Applications</a></p>
<p class="toc level2"><a href="bnaph.html">4.&nbsp;&nbsp;JavaServer Faces Technology</a></p>
<p class="toc level2"><a href="giepx.html">5.&nbsp;&nbsp;Introduction to Facelets</a></p>
<p class="toc level2"><a href="gjddd.html">6.&nbsp;&nbsp;Expression Language</a></p>
<p class="toc level2"><a href="bnaqz.html">7.&nbsp;&nbsp;Using JavaServer Faces Technology in Web Pages</a></p>
<p class="toc level2"><a href="gjcut.html">8.&nbsp;&nbsp;Using Converters, Listeners, and Validators</a></p>
<p class="toc level2"><a href="bnatx.html">9.&nbsp;&nbsp;Developing with JavaServer Faces Technology</a></p>
<p class="toc level2"><a href="gkmaa.html">10.&nbsp;&nbsp;JavaServer Faces Technology: Advanced Concepts</a></p>
<p class="toc level2"><a href="gkiow.html">11.&nbsp;&nbsp;Using Ajax with JavaServer Faces Technology</a></p>
<p class="toc level2"><a href="gkhxa.html">12.&nbsp;&nbsp;Composite Components: Advanced Topics and Example</a></p>
<p class="toc level2"><a href="bnavg.html">13.&nbsp;&nbsp;Creating Custom UI Components and Other Custom Objects</a></p>
<p class="toc level2"><a href="bnawo.html">14.&nbsp;&nbsp;Configuring JavaServer Faces Applications</a></p>
<p class="toc level2"><a href="bnafd.html">15.&nbsp;&nbsp;Java Servlet Technology</a></p>
<p class="toc level2"><a href="glrbb.html">16.&nbsp;&nbsp;Uploading Files with Java Servlet Technology</a></p>
<p class="toc level2"><a href="bnaxu.html">17.&nbsp;&nbsp;Internationalizing and Localizing Web Applications</a></p>
<p class="toc level1 tocsp"><a href="bnayk.html">Part&nbsp;III&nbsp;Web Services</a></p>
<p class="toc level2"><a href="gijti.html">18.&nbsp;&nbsp;Introduction to Web Services</a></p>
<p class="toc level2"><a href="bnayl.html">19.&nbsp;&nbsp;Building Web Services with JAX-WS</a></p>
<p class="toc level2"><a href="giepu.html">20.&nbsp;&nbsp;Building RESTful Web Services with JAX-RS</a></p>
<p class="toc level2"><a href="gjjxe.html">21.&nbsp;&nbsp;JAX-RS: Advanced Topics and Example</a></p>
<p class="toc level1 tocsp"><a href="bnblr.html">Part&nbsp;IV&nbsp;Enterprise Beans</a></p>
<p class="toc level2"><a href="gijsz.html">22.&nbsp;&nbsp;Enterprise Beans</a></p>
<p class="toc level2"><a href="gijre.html">23.&nbsp;&nbsp;Getting Started with Enterprise Beans</a></p>
<p class="toc level2"><a href="gijrb.html">24.&nbsp;&nbsp;Running the Enterprise Bean Examples</a></p>
<p class="toc level2"><a href="bnbpk.html">25.&nbsp;&nbsp;A Message-Driven Bean Example</a></p>
<p class="toc level2"><a href="gkcqz.html">26.&nbsp;&nbsp;Using the Embedded Enterprise Bean Container</a></p>
<p class="toc level2"><a href="gkidz.html">27.&nbsp;&nbsp;Using Asynchronous Method Invocation in Session Beans</a></p>
<p class="toc level1 tocsp"><a href="gjbnr.html">Part&nbsp;V&nbsp;Contexts and Dependency Injection for the Java EE Platform</a></p>
<p class="toc level2"><a href="giwhb.html">28.&nbsp;&nbsp;Introduction to Contexts and Dependency Injection for the Java EE Platform</a></p>
<p class="toc level2"><a href="gjbls.html">29.&nbsp;&nbsp;Running the Basic Contexts and Dependency Injection Examples</a></p>
<p class="toc level2"><a href="gjehi.html">30.&nbsp;&nbsp;Contexts and Dependency Injection for the Java EE Platform: Advanced Topics</a></p>
<p class="toc level2"><a href="gkhre.html">31.&nbsp;&nbsp;Running the Advanced Contexts and Dependency Injection Examples</a></p>
<p class="toc level1 tocsp"><a href="bnbpy.html">Part&nbsp;VI&nbsp;Persistence</a></p>
<p class="toc level2"><a href="bnbpz.html">32.&nbsp;&nbsp;Introduction to the Java Persistence API</a></p>
<p class="toc level2"><a href="gijst.html">33.&nbsp;&nbsp;Running the Persistence Examples</a></p>
<p class="toc level2"><a href="bnbtg.html">34.&nbsp;&nbsp;The Java Persistence Query Language</a></p>
<p class="toc level2"><a href="gjitv.html">35.&nbsp;&nbsp;Using the Criteria API to Create Queries</a></p>
<p class="toc level2"><a href="gkjiq.html">36.&nbsp;&nbsp;Creating and Using String-Based Criteria Queries</a></p>
<p class="toc level2"><a href="gkjjf.html">37.&nbsp;&nbsp;Controlling Concurrent Access to Entity Data with Locking</a></p>
<p class="toc level2"><a href="gkjia.html">38.&nbsp;&nbsp;Using a Second-Level Cache with Java Persistence API Applications</a></p>
<p class="toc level1 tocsp"><a href="gijrp.html">Part&nbsp;VII&nbsp;Security</a></p>
<p class="toc level2"><a href="bnbwj.html">39.&nbsp;&nbsp;Introduction to Security in the Java EE Platform</a></p>
<p class="toc level2"><a href="bncas.html">40.&nbsp;&nbsp;Getting Started Securing Web Applications</a></p>
<p class="toc level2"><a href="bnbyk.html">41.&nbsp;&nbsp;Getting Started Securing Enterprise Applications</a></p>
<p class="toc level2"><a href="gjjwx.html">42.&nbsp;&nbsp;Java EE Security: Advanced Topics</a></p>
<p class="toc level3"><a href="bnbyb.html">Working with Digital Certificates</a></p>
<p class="toc level4"><a href="bnbyb.html#bnbyc">Creating a Server Certificate</a></p>
<p class="toc level5"><a href="bnbyb.html#gjrgy">To Use <tt>keytool</tt> to Create a Server Certificate</a></p>
<p class="toc level4 tocsp"><a href="bnbyb.html#glifw">Adding Users to the Certificate Realm</a></p>
<p class="toc level4"><a href="bnbyb.html#bnbyf">Using a Different Server Certificate with the GlassFish Server</a></p>
<p class="toc level5"><a href="bnbyb.html#gmphf">To Specify a Different Server Certificate</a></p>
<p class="toc level3 tocsp"><a href="glien.html">Authentication Mechanisms</a></p>
<p class="toc level4"><a href="glien.html#glieq">Client Authentication</a></p>
<p class="toc level4"><a href="glien.html#gliel">Mutual Authentication</a></p>
<p class="toc level5"><a href="glien.html#bnbyh">Enabling Mutual Authentication over SSL</a></p>
<p class="toc level5"><a href="glien.html#bnbyi">Creating a Client Certificate for Mutual Authentication</a></p>
<p class="toc level3 tocsp"><a href="glxce.html">Using Form-Based Login in JavaServer Faces Web Applications</a></p>
<p class="toc level4"><a href="glxce.html#glxdh">Using <tt>j_security_check</tt> in JavaServer Faces Forms</a></p>
<p class="toc level4"><a href="glxce.html#glxef">Using a Managed Bean for Authentication in JavaServer Faces Applications</a></p>
<p class="toc level3 tocsp"><a href="glxgo.html">Using the JDBC Realm for User Authentication</a></p>
<p class="toc level4"><a href="glxgo.html#glxfc">To Configure a JDBC Authentication Realm</a></p>
<div id="scrolltoc" class="onpage">
<p class="toc level3 tocsp"><a href="">Securing HTTP Resources</a></p>
</div>
<p class="toc level3"><a href="gligc.html">Securing Application Clients</a></p>
<p class="toc level4"><a href="gligc.html#glidw">Using Login Modules</a></p>
<p class="toc level4"><a href="gligc.html#glihq">Using Programmatic Login</a></p>
<p class="toc level3 tocsp"><a href="glifd.html">Securing Enterprise Information Systems Applications</a></p>
<p class="toc level4"><a href="glifd.html#glihl">Container-Managed Sign-On</a></p>
<p class="toc level4"><a href="glifd.html#glidp">Component-Managed Sign-On</a></p>
<p class="toc level4"><a href="glifd.html#gligs">Configuring Resource Adapter Security</a></p>
<p class="toc level4"><a href="glifd.html#gligw">To Map an Application Principal to EIS Principals</a></p>
<p class="toc level3 tocsp"><a href="gkhrl.html">Configuring Security Using Deployment Descriptors</a></p>
<p class="toc level4"><a href="gkhrl.html#bnccm">Specifying Security for Basic Authentication in the Deployment Descriptor</a></p>
<p class="toc level4"><a href="gkhrl.html#gkafq">Specifying Non-Default Principal-to-Role Mapping in the Deployment Descriptor</a></p>
<p class="toc level3 tocsp"><a href="gmprw.html">Further Information about Security</a></p>
<p class="toc level1 tocsp"><a href="gijue.html">Part&nbsp;VIII&nbsp;Java EE Supporting Technologies</a></p>
<p class="toc level2"><a href="gijto.html">43.&nbsp;&nbsp;Introduction to Java EE Supporting Technologies</a></p>
<p class="toc level2"><a href="bncih.html">44.&nbsp;&nbsp;Transactions</a></p>
<p class="toc level2"><a href="bncjh.html">45.&nbsp;&nbsp;Resources and Resource Adapters</a></p>
<p class="toc level2"><a href="glodb.html">46.&nbsp;&nbsp;The Resource Adapter Example</a></p>
<p class="toc level2"><a href="bncdq.html">47.&nbsp;&nbsp;Java Message Service Concepts</a></p>
<p class="toc level2"><a href="bncgv.html">48.&nbsp;&nbsp;Java Message Service Examples</a></p>
<p class="toc level2"><a href="gkahp.html">49.&nbsp;&nbsp;Bean Validation: Advanced Topics</a></p>
<p class="toc level2"><a href="gkeed.html">50.&nbsp;&nbsp;Using Java EE Interceptors</a></p>
<p class="toc level1 tocsp"><a href="gkgjw.html">Part&nbsp;IX&nbsp;Case Studies</a></p>
<p class="toc level2"><a href="glnvi.html">51.&nbsp;&nbsp;Duke's Bookstore Case Study Example</a></p>
<p class="toc level2"><a href="gkaee.html">52.&nbsp;&nbsp;Duke's Tutoring Case Study Example</a></p>
<p class="toc level2"><a href="glnpw.html">53.&nbsp;&nbsp;Duke's Forest Case Study Example</a></p>
<p class="toc level1 tocsp"><a href="idx-1.html">Index</a></p>
</td>
      <td width="10px">&nbsp;</td>
      <td>
         <div class="header">
             <div class="banner">
                <table width="100%" border="0" cellpadding="5" cellspacing="0">
                   <tbody>
                      <tr>
                         <td valign="bottom"><p class="Banner">The Java EE 6 Tutorial
</p></td>
                         <td align="right"  valign="bottom"><img src="graphics/javalogo.png" alt="Java Coffee Cup logo"></td>
                      </tr>
                   </tbody>
                </table>
             </div>

             <div class="header-links">
	         <a href="./index.html">Home</a> | 
<a href="../information/download.html">Download</a> | 
<a href="./javaeetutorial6.pdf">PDF</a> | 
<a href="../information/faq.html">FAQ</a> | 
<a href="http://docs.oracle.com/javaee/support/feedback.htm">Feedback</a>

             </div>
             <div class="navigation">
                 <a href="glxgo.html"><img src="graphics/leftButton.gif" border="0" alt="Previous" title="Previous"></a>
                 <a href="p1.html"><img src="graphics/upButton.gif" border="0" alt="Contents" title="Contents"></a>
                 <a href="gligc.html"><img src="graphics/rightButton.gif" border="0" alt="Next" title="Next"></a>
             </div>
         </div>

	 <div class="maincontent">      	 
             

<a name="gmmku"></a><h2>Securing HTTP Resources</h2>
<p>When a request URI is matched by multiple constrained URL patterns, the constraints
that apply to the request are those that are associated with the best
matching URL pattern. The servlet matching rules defined in Chapter 12, "Mapping Requests
To Servlets," in the Java Servlet 3.0 Specification, are used to determine the
best matching URL pattern to the request URI. No protection requirements apply to
a request URI that is not matched by a constrained URL pattern. The
HTTP method of the request plays no role in selecting the best matching
URL pattern for a request.</p>

<p>When HTTP methods are listed within a constraint definition, the protections defined by
the constraint are applied to the listed methods only.</p>

<p>When HTTP methods are not listed within a constraint definition, the protections defined
by the constraint apply to the complete set of HTTP methods, including HTTP
extension methods.</p>

<p>When constraints with different protection requirements apply to the same combination of URL
patterns and HTTP methods, the rules for combining the protection requirements are as
defined in Section 13.8.1, "Combining Constraints," in the Java Servlet 3.0 Specification.</p>

<p>Follow these guidelines to properly secure a web application:</p>


<ul><li><p>Do not list HTTP methods within constraint definitions. This is the simplest way to ensure that you are not leaving HTTP methods unprotected. For example:</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #1 --></b>
&lt;security-constraint>
    &lt;display-name>Do not enumerate Http Methods&lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
    &lt;/web-resource-collection>
    &lt;auth-constraint>
        &lt;role-name>sales&lt;/role-name>
    &lt;/auth-constraint>
&lt;/security-constraint></pre><p>If you list methods in a constraint, all non-listed methods of the effectively infinite set of possible HTTP methods, including extension methods, will be <b>unprotected</b>. The following example shows a constraint that lists the GET method and thus defines no protection on any of the other possible HTTP methods. Do not use such a constraint unless you are certain that this is the protection scheme you intend to define.</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #2 --></b>
&lt;security-constraint>
    &lt;display-name>
        Protect GET only, leave all other methods unprotected
    &lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
        &lt;http-method>GET&lt;/http-method>
    &lt;/web-resource-collection>
    &lt;auth-constraint>
        &lt;role-name>sales&lt;/role-name>
    &lt;/auth-constraint>
&lt;/security-constraint></pre></li>
<li><p>If you need to apply specific types of protection to specific HTTP methods, make sure you define constraints to cover every method that you want to permit, with or without constraint, at the corresponding URL patterns. If there are any methods that you do not want to permit, you must also create a constraint that denies access to those methods at the same patterns; for an example, see security constraint #5 in the next bullet.</p>

<p>For example, to permit GET and POST, where POST requires authentication and GET is permitted without constraint, you could define the following constraints:</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #3 --></b>
&lt;security-constraint>
    &lt;display-name>Allow unprotected GET&lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
        &lt;http-method>GET&lt;/http-method>
    &lt;/web-resource-collection>
&lt;/security-constraint>

<b>&lt;!-- SECURITY CONSTRAINT #4 --></b>
&lt;security-constraint>
    &lt;display-name>Require authentication for POST&lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
        &lt;http-method>POST&lt;/http-method>
    &lt;/web-resource-collection>
    &lt;auth-constraint>
        &lt;role-name>sales&lt;/role-name>
    &lt;/auth-constraint>
&lt;/security-constraint></pre></li>
<li><p>The simplest way to ensure that you deny all HTTP methods except those that you want to be permitted is to use <tt>http-method-omission</tt> elements to omit those HTTP methods from the security constraint, and also to define an <tt>auth-constraint</tt> that names no roles. The security constraint will apply to all methods except those that were named in the omissions, and the constraint will apply only to the resources matched by the patterns in the constraint.</p>

<p>For example, the following constraint excludes access to all methods except GET and POST at the resources matched by the pattern <tt>/company/*</tt>:</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #5 --></b>
&lt;security-constraint>
    &lt;display-name>Deny all HTTP methods except GET and POST&lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
        &lt;http-method-omission>GET&lt;/http-method-omission>
        &lt;http-method-omission>POST&lt;/http-method-omission>
    &lt;/web-resource-collection>
    &lt;auth-constraint/>
&lt;/security-constraint></pre><p>If you want to extend these exclusions to the unconstrained parts of your application, also include the URL pattern <tt>/</tt> (forward slash):</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #6 --></b>
&lt;security-constraint>
    &lt;display-name>Deny all HTTP methods except GET and POST&lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/company/*&lt;/url-pattern>
        <b>&lt;url-pattern>/&lt;/url-pattern></b>
        &lt;http-method-omission>GET&lt;/http-method-omission>
        &lt;http-method-omission>POST&lt;/http-method-omission>
    &lt;/web-resource-collection>
    &lt;auth-constraint/>
&lt;/security-constraint></pre></li>
<li><p>If, for your web application, you do not want any resource to be accessible unless you explicitly define a constraint that permits access to it, you can define an <tt>auth-constraint</tt> that names no roles and associate it with the URL pattern <tt>/</tt>. The URL pattern <tt>/</tt> is the weakest matching pattern. Do not list any HTTP methods in this constraint.</p>

<pre><b>&lt;!-- SECURITY CONSTRAINT #7 --></b>
&lt;security-constraint>
    &lt;display-name>
        Switch from Constraint to Permission model 
        (where everything is denied by default)
    &lt;/display-name>
    &lt;web-resource-collection>
        &lt;url-pattern>/&lt;/url-pattern>
    &lt;/web-resource-collection>
    &lt;auth-constraint/>
&lt;/security-constraint></pre></li></ul>

         </div>
         <div class="navigation">
             <a href="glxgo.html"><img src="graphics/leftButton.gif" border="0" alt="Previous" title="Previous"></a>
             <a href="p1.html"><img src="graphics/upButton.gif" border="0" alt="Contents" title="Contents"></a>
             <a href="gligc.html"><img src="graphics/rightButton.gif" border="0" alt="Next" title="Next"></a>
         </div>

         <div class="copyright">
      	    <p>Copyright &copy; 2013, Oracle and/or its affiliates. All rights reserved. <a href="docinfo.html">Legal Notices</a></p>
      	 </div>

      </td>
   </tr>
</tbody>
</table>
<!-- Start SiteCatalyst code   -->
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code_download.js"></script>
<script language="JavaScript" src="http://www.oracle.com/ocom/groups/systemobject/@mktg_admin/documents/systemobject/s_code.js"></script>
 
<!-- ********** DO NOT ALTER ANYTHING BELOW THIS LINE ! *********** -->
<!--  Below code will send the info to Omniture server -->
<script language="javascript">var s_code=s.t();if(s_code)document.write(s_code)</script>
<noscript><p>Scripting on this page tracks web page traffic,
but does not change the content in any way.</p></noscript>
<!-- End SiteCatalyst code -->
</body>
</html>

