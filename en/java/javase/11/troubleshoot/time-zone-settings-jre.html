<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <meta name="description" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <title>Time Zone Settings in the JRE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Troubleshooting Guide">
      <meta property="og:description" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Troubleshooting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="troubleshooting-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:41:43-07:00">
      <meta name="dcterms.title" content="Troubleshooting Guide">
      <meta name="dcterms.dateCopyrighted" content="1995, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94880-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="debug-core-library-issues.html" title="Previous" type="text/html">
      <link rel="next" href="debug-client-issues.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TROUBLESHOOT">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="debug-core-library-issues.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="debug-client-issues.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Troubleshooting Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="debug-core-library-issues.html" property="item" typeof="WebPage"><span property="name">Debug Core Library Issues </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Time Zone Settings in the JRE</li>
            </ol>
            <a id="GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F" name="GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F"></a><a id="JSTGD360"></a><a id="JSTGD359"></a>
            
            <h2 id="JSTGD-GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F" class="sect2"><span class="enumeration_chapter">8 </span>Time Zone Settings in the JRE
            </h2>
         </header>
         <div class="ind">
            <div>
               <div><span>This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.</span></div>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="time-zone-settings-jre.html#GUID-4C66F701-322F-497B-A02C-F58E3E113394" title="The JRE reads the native time zone information to determine your default time zone.">Native Time Zone Information and the JRE</a></p>
                  </li>
                  <li>
                     <p><a href="time-zone-settings-jre.html#GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF">Determine the Default Time Zone on Windows</a></p>
                  </li>
               </ul>
            </div><a id="JSTGD361"></a><div class="props_rev_3"><a id="GUID-4C66F701-322F-497B-A02C-F58E3E113394" name="GUID-4C66F701-322F-497B-A02C-F58E3E113394"></a><h3 id="JSTGD-GUID-4C66F701-322F-497B-A02C-F58E3E113394" class="sect3">Native Time Zone Information and the JRE</h3>
               <div>
                  <p>The JRE reads the native time zone information to determine your default time zone.</p>
                  <p>For example, on Windows, the JRE queries the registry to determine the default time zone.</p>
                  <p>However, the JRE also maintains its own time zone database. This provides cross-platform support because the different operating system APIs are not sufficient to support the Java APIs. The Java time zone database supports time zone IDs and determines daylight saving time rules for all the time zones that the JRE supports. The <code class="codeph">tzupdater</code> tool is available for download from the <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">Java SE Download Page</a>.
                  </p>
                  <p>Modifications to the JRE for each specific operating system are necessary so that the operating system can deliver the system time to the JRE. Then, if a Java application requests the system date by calling date and time related constructors, the system time is returned.</p>
                  <p>Examples of such constructors are:</p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li><span class="apiname">java.util.Date()</span></li>
                     <li><span class="apiname">java.util.GregorianCalendar()</span></li>
                     <li></li>
                  </ul>
                  <p>Constructors related to date and time include:</p>
                  <ul class="simple" style="list-style-type: none;padding-left:0;">
                     <li><span class="apiname">System.currentTimeMillis()</span></li>
                     <li><span class="apiname">System.nanoTime()</span></li>
                     <li></li>
                  </ul>
                  <p>Operating system-specific patches might be required to ensure that the correct system time is delivered to the JRE.</p>
                  <p>The following sections describe troubleshooting techniques for time zone settings.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="time-zone-settings-jre.html#GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367">Determine the Time Zone Data Version in Use</a></p>
                     </li>
                     <li>
                        <p><a href="time-zone-settings-jre.html#GUID-B567CDFC-2801-4258-86A7-D96C57EB2811">Troubleshoot Problems with TZupdater</a></p>
                     </li>
                  </ul>
               </div><a id="JSTGD362"></a><div class="props_rev_3"><a id="GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367" name="GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367"></a><h4 id="JSTGD-GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367" class="sect4">Determine the Time Zone Data Version in Use</h4>
                  <div>
                     <div class="section">
                        <p>The time zone database version that ships in any JRE from Oracle is documented in the release notes. However, the actual version can be different from the version mentioned there if the JRE was patched using the <code class="codeph">tzupdater</code> tool.
                        </p>
                        <p>To determine the current time zone data version of your JRE, either run the <code class="codeph">tzupdater</code> tool with the Version option, or examine the header of the <code class="codeph">ZoneInfoMappings</code> file.
                        </p>
                        <p>Follow these two steps to determine the time zone data:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Determine the Time Zone with TZupdater: </span>The Java time zone updater tool is called <code class="codeph">tzupdater</code>. To determine the time zone database version of your JRE, run this tool as follows:
                              </p><pre class="oac_no_warn" dir="ltr">java -jar tzupdater.jar -V
</pre><p>Here is a typical output from running the <code class="codeph">tzupdater</code> tool.
                              </p><pre class="oac_no_warn" dir="ltr">tzupdater version 2.1.0-b04
JRE tzdata version: tzdata2016f
</pre><p>You can download the <code class="codeph">tzupdater</code> tool from this web page: <a href="http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html" target="_blank">Timezone Updater Tool</a>.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Examine the ZoneInfoMappings File: </span> Even without the <code class="codeph">tzupdater</code> tool, you can quickly check the version by examining the header of the file <code class="codeph"><span class="variable" translate="no">&lt;java-home&gt;</span>/lib/zi/ZoneInfoMappings</code>. This data is stored in a binary format that is specific to Java. On the Oracle Solaris, Linux and Mac macOS operating systems, you can use the octal dump command to see the header of this file.
                              </p>
                              <p>The following example shows the octal dump command format.</p><pre class="oac_no_warn" dir="ltr">/usr/bin/od -c -j 11 -N 11 &lt;java-home&gt;/lib/zi/ZoneInfoMappings
</pre><p>The following example shows the typical result of the dump command.</p><pre class="oac_no_warn" dir="ltr">/usr/bin/od -c -j 11 -N 11 /farfaraway/jdks/jdk1.6.0_21/jre/lib/zi/ZoneInfoMappings0000000   t   z   d   a   t   a   2   0   1   0   i0000013
</pre><p>The following example shows the time zone data version that is embedded in that JRE is <code class="codeph">tzdata2010i</code>.
                              </p>
                              <p>On Microsoft Windows, you can use the <code class="codeph">findstr</code> command to examine the <code class="codeph">ZoneInfoMappings</code> file. Here is an example.
                              </p><pre class="oac_no_warn" dir="ltr">findstr tzdata &lt;java-home&gt;\lib\zi\ZoneInfoMappings
</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD366"></a><div class="props_rev_3"><a id="GUID-B567CDFC-2801-4258-86A7-D96C57EB2811" name="GUID-B567CDFC-2801-4258-86A7-D96C57EB2811"></a><h4 id="JSTGD-GUID-B567CDFC-2801-4258-86A7-D96C57EB2811" class="sect4">Troubleshoot Problems with TZupdater</h4>
                  <div>
                     <div class="section">
                        <p>Sometimes, when you run <code class="codeph">tzupdater</code>, it quits with the message: “There's no tzdata available for this Java runtime." The following are two examples.
                        </p><pre class="pre codeblock"><code>$ java -jar tzupdater.jar -V 
tzupdater version 2.1.1-b01 
JRE tzdata version: tzdata2017b
There's no tzdata available for this Java runtime.</code></pre><p>The likely cause is that you are using a JRE that is not from Oracle. Oracle provides the JRE for Oracle Solaris (x86, x64, SPARC), Linux (x86, x64, ARM), Microsoft Windows (x86, x64), and macOS (x64). The <code class="codeph">java.vendor</code> property value for these is Sun Microsystems Inc., Oracle Corporation or BEA Systems, Inc. Oracle does not provide the JRE for other platforms. 
                        </p>
                        <p>The output of running the <code class="codeph">java -version</code> command does not provide enough information to determine the actual vendor of a JRE. However, running <code class="codeph">tzupdater</code> in update mode with the <code class="codeph">-v</code> option does print out the <code class="codeph">java.vendor</code> property. The following example shows the result of running tzupdater when the environment is HP_UX from Hewlett Packard.
                        </p><pre class="pre codeblock"><code>root@my_server:/opt/java6/bin&gt; uname -a
HP-UX my_server B.11.23 U ia64 1114591084 unlimited-user license
root@my_server:/opt/java6/bin&gt; ./java -version
java version "1.6.0.05"
Java(TM) SE Runtime Environment (build 1.6.0.05-jinteg_14_oct_2009_01_44-b00)
Java HotSpot(TM) Server VM (build 14.2-b01-jre1.6.0.05-rc5, mixed mode)
root@my_server:/opt/java6/bin&gt; ./java -jar tzupdater.jar -v -l
java.home: /opt/java6/jre
java.vendor: Hewlett-Packard Co.
java.version: 1.6.0.05
JRE tzdata version: tzdata2009i
There's no tzdata available for this Java runtime.
</code></pre><p>In the previous example, <code class="codeph">java.vendor</code> is set to “Hewlett-Packard Co." The JRE that you are trying to update using <code class="codeph">tzupdater</code> is not supported by Oracle. 
                        </p>
                        <p>A possible solution is to visit the website of your JRE vendor and determine whether a time zone updater tool is available.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSTGD369"></a><div class="props_rev_3"><a id="GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF" name="GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF"></a><h3 id="JSTGD-GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF" class="sect3">Determine the Default Time Zone on Windows</h3>
               <div>
                  <div class="section">
                     <p>This section clarifies how the JRE determines the default time zone on the Windows Vista and Windows 7 operating systems. If Java doesn't report the expected time zone, then use the troubleshooting techniques provided in the following sections:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08">Check the Default Time Zone JRE Reports</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-3295371E-C1EF-4098-81A2-5ADC31956295">Determine the Setting in the Control Panel</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF">Check for Automatic Daylight Saving Time Adjustment</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6">Set the Default Time Zone in the Control Panel</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5">Check -Duser.timezone System Property</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542">Special Tools in Windows 7</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9">JRE Internal Representation of Time Zone Mappings</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JSTGD370"></a><div class="props_rev_3"><a id="GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08" name="GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08"></a><h4 id="JSTGD-GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08" class="sect4">Check the Default Time Zone JRE Reports</h4>
                  <div>
                     <div class="section">
                        <p>You can write a simple program to determine which time zone the JRE reports as the default time zone-based on a check with the native operating system.</p>
                        <p>The Java program in the following example returns the default time zone:</p><pre class="oac_no_warn" dir="ltr">
public class DefaultTimeZone {
    public static void main(String[] args) {
        System.out.println(java.util.TimeZone.getDefault().getID());
    }
}
</pre><p>You can save the code snippet in the previous example to a file named <code class="codeph">DefaultTimeZone.java</code> and compile it using the <code class="codeph">javac</code> command. Then, you can run the compiled <code class="codeph">DefaultTimeZone</code> class, as shown in the following example.
                        </p><pre class="oac_no_warn" dir="ltr">
c:\tztest&gt; javac DefaultTimeZone.java
c:\tztest&gt; java DefaultTimeZone
Europe/Berlin
</pre><p>In the previous example, the default time zone is Europe/Berlin. Running the program should display your local time zone. If the output is not the expected time zone, then continue with the following troubleshooting steps.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD373"></a><div class="props_rev_3"><a id="GUID-3295371E-C1EF-4098-81A2-5ADC31956295" name="GUID-3295371E-C1EF-4098-81A2-5ADC31956295"></a><h4 id="JSTGD-GUID-3295371E-C1EF-4098-81A2-5ADC31956295" class="sect4">Determine the Setting in the Control Panel</h4>
                  <div>
                     <div class="section">
                        <p>You can change or examine the system's default time zone using the Windows Control Panel. For example, you can select this time zone setting in Windows 7:</p>
                        <p>(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna</p>
                        <p>The corresponding value for the Registry key <code class="codeph">TimeZoneKeyName</code> is “W. Europe Standard Time."
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD374"></a><div class="props_rev_3"><a id="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF" name="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF"></a><h4 id="JSTGD-GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF" class="sect4">Check for Automatic Daylight Saving Time Adjustment</h4>
                  <div>
                     <div class="section">
                        <p>You can check whether the automatic adjustment of daylight saving time is enabled through the graphical user interface (GUI) or through the Windows registry.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">GUI Method:</span> To use the Control Panel to check whether automatic adjustment of daylight saving time is enabled:.
                              </p>
                              <ol>
                                 <li>
                                    <p>Click the Windows <span class="bold">Start</span> button and then click <span class="bold">Control Panel</span>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">Date and Time</span>. 
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click the <span class="bold">Change Time Zone</span> button.
                                    </p>
                                 </li>
                                 <li>
                                    <p>There is a check box labeled “Automatically adjust time for Daylight Savings Time. “See if this check box is selected, and change the setting if you want.</p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">OK</span>. This returns you to the Date and Time dialog box.
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p><span class="bold">Windows Registry Method:</span> You can run Windows Registry Editor to check whether automatic adjustment of daylight saving time is enabled.
                              </p>
                              <div class="infoboxnote" id="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF__GUID-952881E8-09BA-4D2F-A683-785990806D97">
                                 <p class="notep1">Note:</p>
                                 <p>It is a good practice to back up the Windows registry before reviewing or editing it. If you make a mistake, you can damage the Windows registry.</p>
                              </div>
                              <p>To enable the automatic adjustment of daylight saving time from the Windows registry:</p>
                              <ol>
                                 <li>
                                    <p>Click the Windows <span class="bold">Start</span> button.
                                    </p>
                                 </li>
                                 <li>
                                    <p>In the Search programs and files field, enterregedit and then press Enter to open the Registry Editor.</p>
                                 </li>
                                 <li>
                                    <p>In the Registry Editor, search for the key DynamicDaylightTimeDisabled and look at the setting.</p>
                                    <p>If the registry setting is 1, then dynamic daylight time is disabled.</p>
                                    <p>If the registry setting is 0, then dynamic daylight time is enabled. </p>
                                 </li>
                              </ol>
                              <p>If you prefer, you can access the Windows registry from the Windows command window.</p>
                           </li>
                        </ul>
                        <p>In the following example, the registry setting is 1. With this setting, the clock is not automatically adjusted for daylight saving time.</p><pre class="oac_no_warn" dir="ltr">
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation]
"DynamicDaylightTimeDisabled"=dword:00000001
</pre><p>If you disable the <code class="codeph">DynamicDaylightTimeDisabled</code> option, then Java returns a GMT (Greenwich Mean Time) offset and not a time zone ID that is compatible with the uniform naming convention (such as “Europe/Berlin"). For example, the offset will be expressed as GMT+01 and not “Europe/Berlin."
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD376"></a><div class="props_rev_3"><a id="GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6" name="GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6"></a><h4 id="JSTGD-GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6" class="sect4">Set the Default Time Zone in the Control Panel</h4>
                  <div>
                     <div class="section">
                        <p>You can change or review the system's default time zone by using the Windows Control Panel. </p>
                        <p>To set the system's default time zone from the Control Panel:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>Click the Windows <span class="bold">Start</span> button and then click <span class="bold">Control Panel</span>. </span></li>
                        <li><span>Click <span class="bold">Date and Time</span>. </span></li>
                        <li><span>Click the <span class="bold">Change Time Zone</span> button.</span></li>
                        <li><span>From the <span class="bold">Time Zone</span> menu, select your preferred time zone. </span></li>
                        <li><span>Click <span class="bold">OK</span>. This returns you to the Date and Time dialog box.</span></li>
                        <li><span>Click <span class="bold">OK</span> to close the Date and Time dialog box.</span></li>
                     </ol>
                     <div class="section">
                        <p>For example, you can select this time zone in Windows 7:</p><pre class="oac_no_warn" dir="ltr">(UTC)+1:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna.
</pre><p>The corresponding value for the Registry key <code class="codeph">TimeZoneKeyName</code> is “W. Europe Standard Time."
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD377"></a><div class="props_rev_3"><a id="GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5" name="GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5"></a><h4 id="JSTGD-GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5" class="sect4">Check -Duser.timezone System Property</h4>
                  <div>
                     <div class="section">
                        <p>You can explicitly set a default time zone on the command line by using the Java system property called <code class="codeph">user.timezone</code>. This bypasses the settings in the Windows operating system and can be a workaround. For instance, this setting is useful if you want daylight saving time (DST) only for a single Java program running on the system.
                        </p>
                        <p>The following example shows the system property <code class="codeph">-Duser.timezone</code> by running a Java program called DefaultTimeTestZone from the Windows Command Prompt window. 
                        </p>
                        <p><code class="codeph">c:\tztest&gt; java -Duser.timezone=America/New_York DefaultTimeZone  America/New_York</code></p>
                        <p>If setting a default time zone explicitly by specifying <code class="codeph">-Duser.timezone</code> works for the <code class="codeph">DefaultTimeTestZone</code> program, but does not work for your program, you should check whether your code overwrites the default Java time zone during runtime with a method call such as this:
                        </p><pre class="oac_no_warn" dir="ltr">TimeZone.setDefault(TimeZone zone)</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD378"></a><div class="props_rev_3"><a id="GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542" name="GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542"></a><h4 id="JSTGD-GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542" class="sect4">Special Tools in Windows 7</h4>
                  <div>
                     <p>With Windows 7, a tool called <code class="codeph">tzutil.exe</code> is available. With this tool, you can request the current time zone ID abbreviation without manually reading the registry. 
                     </p>
                     <p>Here is an example of running <code class="codeph">tzutil.exe</code>. The first line is the command that you enter in the Windows Command Prompt window. The second line is the system response.
                     </p><pre class="oac_no_warn" dir="ltr">tzutil /g

W. Europe Standard Time</pre></div>
               </div><a id="JSTGD379"></a><div class="props_rev_3"><a id="GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9" name="GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9"></a><h4 id="JSTGD-GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9" class="sect4">JRE Internal Representation of Time Zone Mappings</h4>
                  <div>
                     <p>On Windows, the JRE uses a file <code class="codeph"><span class="variable" translate="no">&lt;java-home&gt;</span>\lib\tzmappings</code> to represent the mapping between Windows and Java time zones. Each line in the file has four tokens. The first token is the Windows time zone registry key called <code class="codeph">TimeZoneKeyName</code>. See <a href="time-zone-settings-jre.html#GUID-3295371E-C1EF-4098-81A2-5ADC31956295">Determine the Setting in the Control Panel</a>.
                     </p>
                     <p>The second token is a time zone map ID. (This is not used in Windows Vista and Windows 7.) The third token is the locale. The fourth token represents the Java time zone ID. The important tokens are token number one, number three (which can be empty), and number four. (<span class="italic">Note:</span> This file is not a public interface.)
                     </p>
                     <p>If you select the time zone called “(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna" in the Windows Control Panel, then the relevant line in the file <code class="codeph">tzmappings</code> is:
                     </p>
                     <p><code class="codeph">W. Europe Standard Time:2,3::Europe/Berlin:</code></p>
                     <p>In this example, the JRE recognizes your default time zone (token number four) as “Europe/Berlin." </p>
                     <p>If there is no appropriate mapping entry in the tzmappings file, then it is possible that Microsoft introduced a new time zone in a Windows update and that the new time zone is not available to the JRE. In this situation, you can file a bug report for the JRE, and request a new entry in the tzmappings file from <a href="http://bugs.java.com" target="_blank">Oracle Java bugs website.</a></p>
                     <p>A similar disconnect between the operating system and the JRE is possible if you ran the tool <code class="codeph">tzedit.exe</code>. This tool is posted by Microsoft on the internet, and allows users to add new time zones. The JRE is unlikely to have a time zone introduced into the system by this tool. Again, the solution is to file a bug to request that a new entry be added to the <code class="codeph">tzmappings</code> file.
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
