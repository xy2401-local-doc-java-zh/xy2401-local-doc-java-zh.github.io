<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter provides information and guidance on some specific procedures for troubleshooting some of the most common issues that might be found in the Java SE Swing API.">
      <meta name="description" content="This chapter provides information and guidance on some specific procedures for troubleshooting some of the most common issues that might be found in the Java SE Swing API.">
      <title>Swing</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Troubleshooting Guide">
      <meta property="og:description" content="This chapter provides information and guidance on some specific procedures for troubleshooting some of the most common issues that might be found in the Java SE Swing API.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Troubleshooting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="troubleshooting-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:41:43-07:00">
      <meta name="dcterms.title" content="Troubleshooting Guide">
      <meta name="dcterms.dateCopyrighted" content="1995, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94880-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="java-2d.html" title="Previous" type="text/html">
      <link rel="next" href="internationalization.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TROUBLESHOOT">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="java-2d.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="internationalization.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Troubleshooting Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="debug-client-issues.html" property="item" typeof="WebPage"><span property="name">Debug Client Issues </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Swing</li>
            </ol>
            <a id="GUID-F09B98F1-AA52-49FB-B695-3BC0754860CD" name="GUID-F09B98F1-AA52-49FB-B695-3BC0754860CD"></a><a id="JSTGD462"></a><a id="JSTGD461"></a>
            
            <h2 id="JSTGD-GUID-F09B98F1-AA52-49FB-B695-3BC0754860CD" class="sect2"><span class="enumeration_chapter">13 </span>Swing
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter provides information and guidance on some specific procedures for troubleshooting some of the most common issues that might be found in the Java SE Swing API.</p>
               <p>This chapter contains the following sections:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="swing.html#GUID-C7D3DA57-ABEE-41B7-AEDD-8AE340323FBC" title="Swing's painting infrastructure changed quite extensively in Java SE 6. If you notice painting artifacts specific in Java SE 6 or later releases, you can try turning off the new functionality. This can be done with the property swing.bufferPerWindow.">General Debug Tips for Swing</a></p>
                  </li>
                  <li>
                     <p><a href="swing.html#GUID-06A687BD-D9D9-48D6-8CF2-FA9F4C52207F" title="Specific debugging tips for Swing and provides examples for possible issues and workarounds.">Specific Debug Tips for Swing</a></p>
                  </li>
               </ul>
            </div><a id="JSTGD463"></a><div class="props_rev_3"><a id="GUID-C7D3DA57-ABEE-41B7-AEDD-8AE340323FBC" name="GUID-C7D3DA57-ABEE-41B7-AEDD-8AE340323FBC"></a><h3 id="JSTGD-GUID-C7D3DA57-ABEE-41B7-AEDD-8AE340323FBC" class="sect3">General Debug Tips for Swing</h3>
               <div>
                  <p>Swing's painting infrastructure changed quite extensively in Java SE 6. If you notice painting artifacts specific in Java SE 6 or later releases, you can try turning off the new functionality. This can be done with the property <code class="codeph">swing.bufferPerWindow</code>.
                  </p>
                  <p>When you are debugging the Swing code which is executed while any menu is popped up, it is recommended to use the debugger remotely. Otherwise, the debugging process and the application execution block each other, and this prevents further work with the system. If that happens, the only action that can be taken is to kill the X server for Oracle Solaris and Linux. See <a href="http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6517045" target="_blank">Bug Database</a>.
                  </p>
                  <p>The following are some common Swing problems:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Painting.</p>
                     </li>
                     <li>
                        <p>Renderers.</p>
                     </li>
                     <li>
                        <p>Updating models from wrong thread.</p>
                     </li>
                     <li>
                        <p>Hangs.</p>
                     </li>
                     <li>
                        <p>Responsiveness.</p>
                     </li>
                     <li>
                        <p>Repainting issues.</p>
                     </li>
                     <li>
                        <p><code class="codeph">isOpaque</code> usage.
                        </p>
                     </li>
                     <li>
                        <p>Startup: could be caused by small heap, loading unnecessary classes.</p>
                     </li>
                  </ul>
                  <p>The following are some things to consider:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Buffer-per-window feature.</p>
                     </li>
                     <li>
                        <p>Native look-and-feel fidelity: Gnome vs Windows</p>
                     </li>
                     <li>
                        <p>Footprint of Swing applications.</p>
                     </li>
                     <li>
                        <p><code class="codeph">JTable</code>, <code class="codeph">JTree</code>, and <code class="codeph">JList</code> all use renderers.
                        </p>
                     </li>
                     <li>
                        <p>Make sure that custom renderers do as little as possible.</p>
                     </li>
                     <li>
                        <p>Update models only from event dispatch thread. Otherwise the display will not reflect the state of the model.</p>
                     </li>
                  </ul>
                  <p>The following identify bad renderers:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Sluggish application, especially when scrolling.</p>
                     </li>
                     <li>
                        <p>Use an optimizer to watch painting calls, look for calls to <code class="codeph">getTableCellTRendererComponent</code>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="JSTGD464"></a><div class="props_rev_3"><a id="GUID-06A687BD-D9D9-48D6-8CF2-FA9F4C52207F" name="GUID-06A687BD-D9D9-48D6-8CF2-FA9F4C52207F"></a><h3 id="JSTGD-GUID-06A687BD-D9D9-48D6-8CF2-FA9F4C52207F" class="sect3">Specific Debug Tips for Swing</h3>
               <div>
                  <p>Specific debugging tips for Swing and provides examples for possible issues and workarounds.</p>
                  <p>The following topics describe problems in Swing and troubleshooting techniques:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="swing.html#GUID-2B4B8143-1731-43DA-BD79-B58996D96F7B" title="Random exceptions and painting problems are usually the result of incorrect threading usage by Swing.">Incorrect Threading</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-BABA5847-91DD-4318-87EB-60787434E90A" title="Another possible source of painting problems can occur if you allow children of a JComponent to overlap.">JComponent Children Overlap</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-5EE04B57-0E04-454F-AD9B-50FCCAF93A42" title="Another source of painting problems can occur if you do not invoke repaint correctly when you need to update the display.">Display Update</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-391FD503-7B22-4A46-8446-8917B33F5BAC" title="Invoke repaint when you change a visible property of a Swing component, you also need not invoke repaint when your model changes.">Model Change</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-879FC96E-074F-4681-A531-D2D023E2DBB8" title="When you add or remove components, you must manually invoke repaint or revalidate Swing and AWT.">Add or Remove Components</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-99980EF9-93D8-412F-8DDF-442B6C56769A" title="Another possible area of painting problems is if a component does not override opaque.">Opaque Override</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-1C90A220-FB64-4D38-8152-A719F02B7BF2" title="Do not make any permanent changes to a Graphics passed to paint, paintComponent, or paintChildren.">Permanent Changes to Graphics</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-6A7C9FCB-74FA-4D52-943B-6E0C6E233F32" title="Although you can override paint and do custom painting in the override, you should instead override paintComponent.">Custom Painting and Double Buffering</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-61A3C658-DE21-4871-BEC5-A1DC6803273D" title="Swing's painting architecture requires an opaque content pane.">Opaque Content Pane</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-0247F7FD-119D-484E-818F-8FD843F711BD" title="Renderers are painted for each cell, so ensure that the renderer does as little as possible.">Renderer Call for Each Cell Performance</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-E17A2C90-C781-42A3-9275-33F0575FEE5A" title="If the life cycle of your model is longer than that of a window with a component using the model, you must explicitly set the model of the Swing component to null.">Possible Leaks</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-3CF05078-9B07-48F3-8B69-8D8F4400847C" title="Mixing heavyweight and lightweight components can work in certain scenarios, as long as the heavyweight component does not overlap with any existing Swing components.">Mix Heavyweight and Lightweight Components</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-79AA3986-FEF1-49D7-B107-23A0070C8359" title="Synth is an empty canvas.">Use Synth</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-56FCD857-F29C-4661-9C86-197A39EEAE7D" title="If a Swing application tries to do too much on the event dispatch thread, then the application will appear sluggish and unresponsive.">Track Activity on Event Dispatch Thread</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-7D0AF4DE-3261-4EAC-8CCE-F7D9B09DB6F9" title="Problems can be caused by differing default layout manager classes on a Swing component.">Specify Default Layout Manager</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-6BC5FDA9-9DBE-4BCA-8635-E2FFD12F2C85" title="MouseListener objects are dispatched to the deepest component that has MouseListener objects (or has enabled MouseEvent objects).">Listener Object Dispatched to Incorrect Component</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-51E79950-8FDC-40CB-AFC9-5BE9849CC18F" title="You must add a JFrame, JWindow, or JDialog component to the content pane.">Add a Component to Content Pane</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-DB8214A9-E866-4462-83C4-569DE74E7F77" title="When using Swing you should use Swing's drag-and-drop support as provided by TransferHandler.">Drag and Drop Support</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-2B32B552-38AB-4709-86DC-A1F6FBDDE911" title="Remember that a component can only exist in one parent at a time.">One Parent for a Component</a></p>
                     </li>
                     <li>
                        <p><a href="swing.html#GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09" title="The JFileChooser class does not support shortcuts on Windows OS (.lnk files).">JFileChooser Issues with Windows Shortcuts</a></p>
                     </li>
                  </ul>
               </div><a id="JSTGD465"></a><div class="props_rev_3"><a id="GUID-2B4B8143-1731-43DA-BD79-B58996D96F7B" name="GUID-2B4B8143-1731-43DA-BD79-B58996D96F7B"></a><h4 id="JSTGD-GUID-2B4B8143-1731-43DA-BD79-B58996D96F7B" class="sect4">Incorrect Threading</h4>
                  <div>
                     <p>Random exceptions and painting problems are usually the result of incorrect threading usage by Swing.</p>
                     <div class="section">
                        <p><span class="italic">All</span> access to Swing components, unless specifically noted in the javadoc, must be done on the event dispatch thread. This includes any models (<code class="codeph">TableModel</code>, <code class="codeph">ListModel</code>, and others) that are attached to Swing components.
                        </p>
                        <p>The best way to check for bad usage of Swing is by using instrumented <code class="codeph">RepaintManager</code>, as illustrated in the following example.
                        </p><pre class="pre codeblock"><code>public class CheckThreadViolationRepaintManager extends RepaintManager {
     // it is recommended to pass the complete check
     private boolean completeCheck = true;

     public boolean isCompleteCheck() {
         return completeCheck;
     }

     public void setCompleteCheck(boolean completeCheck) {
         this.completeCheck = completeCheck;
     }

     public synchronized void addInvalidComponent(JComponent component) {
         checkThreadViolations(component);
         super.addInvalidComponent(component);
     }

     public void addDirtyRegion(JComponent component, int x, int y, int w, int 
h) {
         checkThreadViolations(component);
         super.addDirtyRegion(component, x, y, w, h);
     }

     private void checkThreadViolations(JComponent c) {
         if (!SwingUtilities.isEventDispatchThread() &amp;&amp; (completeCheck || 
c.isShowing())) {
             Exception exception = new Exception();
             boolean repaint = false;
             boolean fromSwing = false;
             StackTraceElement[] stackTrace = exception.getStackTrace();
             for (StackTraceElement st : stackTrace) {
                 if (repaint &amp;&amp; st.getClassName().startsWith("javax.swing.")) {
                     fromSwing = true;
                 }
                 if ("repaint".equals(st.getMethodName())) {
                     repaint = true;
                 }
             }
             if (repaint &amp;&amp; !fromSwing) {
                 //no problems here, since repaint() is thread safe
                 return;
             }
             exception.printStackTrace();
         }
     }
}
</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD467"></a><div class="props_rev_3"><a id="GUID-BABA5847-91DD-4318-87EB-60787434E90A" name="GUID-BABA5847-91DD-4318-87EB-60787434E90A"></a><h4 id="JSTGD-GUID-BABA5847-91DD-4318-87EB-60787434E90A" class="sect4">JComponent Children Overlap</h4>
                  <div>
                     <p>Another possible source of painting problems can occur if you allow children of a <code class="codeph">JComponent</code> to overlap.
                     </p>
                     <p> In this case, the parent must override <code class="codeph">isOptimizedDrawingEnabled</code> to return <code class="codeph">false</code>. If you do not override <code class="codeph">isOptimizedDrawingEnabled</code>, then components can randomly appear on top of others, depending upon which component repaint was invoked on.
                     </p>
                  </div>
               </div><a id="JSTGD468"></a><div class="props_rev_3"><a id="GUID-5EE04B57-0E04-454F-AD9B-50FCCAF93A42" name="GUID-5EE04B57-0E04-454F-AD9B-50FCCAF93A42"></a><h4 id="JSTGD-GUID-5EE04B57-0E04-454F-AD9B-50FCCAF93A42" class="sect4">Display Update</h4>
                  <div>
                     <p>Another source of painting problems can occur if you do not invoke repaint correctly when you need to update the display.</p>
                     <p>Changing a visible property of a Swing component, such as the font, will trigger a repaint or revalidate. If you are writing a custom component, then you must invoke repaint and possibly revalidate whenever the display or sizing information is updated. If you do not, the display will only update the next time someone triggers a repaint.</p>
                     <p>A good way to diagnose this is to resize the window. If the content appears after a resize, then that implies that the component did not invoke repaint or revalidate correctly.</p>
                  </div>
               </div><a id="JSTGD469"></a><div class="props_rev_3"><a id="GUID-391FD503-7B22-4A46-8446-8917B33F5BAC" name="GUID-391FD503-7B22-4A46-8446-8917B33F5BAC"></a><h4 id="JSTGD-GUID-391FD503-7B22-4A46-8446-8917B33F5BAC" class="sect4">Model Change</h4>
                  <div>
                     <p>Invoke repaint when you change a visible property of a Swing component, you also need not invoke repaint when your model changes.</p>
                     <p>If your model sends out the correct change notification, the <code class="codeph">JComponent</code> will invoke repaint or revalidate as appropriate.
                     </p>
                     <p>However, if you change your model but do not send out a notification, then a repaint event may not even work. In particular this will not work with <code class="codeph">JTree</code>. The correct thing to do is to send the appropriate model notification. This can usually be diagnosed by resizing the window and noticing that the display did not update correctly.
                     </p>
                  </div>
               </div><a id="JSTGD470"></a><div class="props_rev_3"><a id="GUID-879FC96E-074F-4681-A531-D2D023E2DBB8" name="GUID-879FC96E-074F-4681-A531-D2D023E2DBB8"></a><h4 id="JSTGD-GUID-879FC96E-074F-4681-A531-D2D023E2DBB8" class="sect4">Add or Remove Components</h4>
                  <p>When you add or remove components, you must manually invoke repaint or revalidate Swing and AWT.</p>
               </div><a id="JSTGD471"></a><div class="props_rev_3"><a id="GUID-99980EF9-93D8-412F-8DDF-442B6C56769A" name="GUID-99980EF9-93D8-412F-8DDF-442B6C56769A"></a><h4 id="JSTGD-GUID-99980EF9-93D8-412F-8DDF-442B6C56769A" class="sect4">Opaque Override</h4>
                  <div>
                     <p>Another possible area of painting problems is if a component does not override opaque.</p>
                     <p>Further, if you do not invoke implementation you must honor the opaque property, that is, if this component is opaque, you must completely fill in the background with a non-opaque color. If you do not honor the opaque property, then you will likely see visual artifacts.</p>
                     <p>The only way to check for this is to look for consistent visual artifacts when the component invokes repaint.</p>
                  </div>
               </div><a id="JSTGD472"></a><div class="props_rev_3"><a id="GUID-1C90A220-FB64-4D38-8152-A719F02B7BF2" name="GUID-1C90A220-FB64-4D38-8152-A719F02B7BF2"></a><h4 id="JSTGD-GUID-1C90A220-FB64-4D38-8152-A719F02B7BF2" class="sect4">Permanent Changes to Graphics</h4>
                  <div>
                     <p>Do not make any permanent changes to a <code class="codeph">Graphics</code> passed to <code class="codeph">paint</code>, <code class="codeph">paintComponent</code>, or <code class="codeph">paintChildren</code>. 
                     </p>
                     <div class="infoboxnote" id="GUID-1C90A220-FB64-4D38-8152-A719F02B7BF2__GUID-B28866C1-BFEA-48DF-AFE8-79575F080313">
                        <p class="notep1">Note:</p>
                        <p>If you override the graphics in a a subclass, then you should not make permanent changes to the <code class="codeph">paint</code>, <code class="codeph">paintComponent</code>, or <code class="codeph">paintChildren</code> passed in <code class="codeph">Graphics</code>. For example, you should not alter the clip <code class="codeph">Rectangle</code> or modify the transform. If you need to do these operations you may find it easier to create a new <code class="codeph">Graphics</code> from the passed in <code class="codeph">Graphics</code> and manipulate it.
                        </p>
                     </div>
                     <p>If you ignore this restriction, then the result will be clipping or other weird visual artifacts.</p>
                  </div>
               </div><a id="JSTGD473"></a><div class="props_rev_3"><a id="GUID-6A7C9FCB-74FA-4D52-943B-6E0C6E233F32" name="GUID-6A7C9FCB-74FA-4D52-943B-6E0C6E233F32"></a><h4 id="JSTGD-GUID-6A7C9FCB-74FA-4D52-943B-6E0C6E233F32" class="sect4">Custom Painting and Double Buffering</h4>
                  <div>
                     <p>Although you can override <code class="codeph">paint</code> and do custom painting in the override, you should instead override <code class="codeph">paintComponent</code>.
                     </p>
                     <p>The <code class="codeph">JComponent.paint</code> method ensures that painting happens to the double buffer. If you override <code class="codeph">paint</code> directly, then you may lose double buffering.
                     </p>
                  </div>
               </div><a id="JSTGD474"></a><div class="props_rev_3"><a id="GUID-61A3C658-DE21-4871-BEC5-A1DC6803273D" name="GUID-61A3C658-DE21-4871-BEC5-A1DC6803273D"></a><h4 id="JSTGD-GUID-61A3C658-DE21-4871-BEC5-A1DC6803273D" class="sect4"> Opaque Content Pane</h4>
                  <div>
                     <p>Swing's painting architecture requires an opaque content pane. </p>
                     <p>The painting architecture of Swing requires an opaque <code class="codeph">JComponent</code> to exist in the containment hierarchy above all other components. This is typically provided by using the content pane. If you replace the content pane, it is recommended that you make the content pane opaque by using <span class="apiname">setOpaque(true)</span>. Additionally, if the content pane overrides <code class="codeph">paintComponent</code>, then it will need to completely fill in the background in an opaque color in <code class="codeph">paintComponent</code>.
                     </p>
                  </div>
               </div><a id="JSTGD475"></a><div class="props_rev_3"><a id="GUID-0247F7FD-119D-484E-818F-8FD843F711BD" name="GUID-0247F7FD-119D-484E-818F-8FD843F711BD"></a><h4 id="JSTGD-GUID-0247F7FD-119D-484E-818F-8FD843F711BD" class="sect4">Renderer Call for Each Cell Performance</h4>
                  <div>
                     <p>Renderers are painted for each cell, so ensure that the renderer does as little as possible.</p>
                     <p>Any slowdown in the renderer is magnified across all cells. For example, if you repaint the visible region of a table with 50x20 visible cells, then there will be 1000 calls to the renderer.</p>
                  </div>
               </div><a id="JSTGD476"></a><div class="props_rev_3"><a id="GUID-E17A2C90-C781-42A3-9275-33F0575FEE5A" name="GUID-E17A2C90-C781-42A3-9275-33F0575FEE5A"></a><h4 id="JSTGD-GUID-E17A2C90-C781-42A3-9275-33F0575FEE5A" class="sect4">Possible Leaks</h4>
                  <div>
                     <p>If the life cycle of your model is longer than that of a window with a component using the model, you must explicitly set the model of the Swing component to null.</p>
                     <div class="section">
                        <p>If you do not set the model to null, your model will retain a reference to the <code class="codeph">Component</code>, which will keep all components in the window from being garbage-collected. Take a look at the following example.
                        </p><pre class="pre codeblock"><code>TableModel myModel = ...;
JFrame frame = new JFrame();
frame.setContentPane(new JScrollPane(new JTable(myModel)));
frame.dispose();
</code></pre><p>If your application still holds a reference to <code class="codeph">myModel</code>, then <code class="codeph">frame</code> and all its children will still be reachable by way of the listener <code class="codeph">JTable</code> installations on <code class="codeph">myModel</code>. The solution is to invoke <span class="apiname">table.setModel(new DefaultTableModel())</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD478"></a><div class="props_rev_3"><a id="GUID-3CF05078-9B07-48F3-8B69-8D8F4400847C" name="GUID-3CF05078-9B07-48F3-8B69-8D8F4400847C"></a><h4 id="JSTGD-GUID-3CF05078-9B07-48F3-8B69-8D8F4400847C" class="sect4">Mix Heavyweight and Lightweight Components</h4>
                  <div>
                     <p>Mixing heavyweight and lightweight components can work in certain scenarios, as long as the heavyweight component does not overlap with any existing Swing components.</p>
                     <div class="section">
                        <p>For example, a heavyweight will not work in an internal frame, because when the user drags around the internal frame it will overlap with other internal frames. If you use heavyweights, then invoke the following methods:</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li><span><span class="apiname">JPopupMenu.setDefaultLightWeightPopupEnabled(false)</span></span></li>
                        <li><span><span class="apiname">ToolTipManager.sharedInstance().setLightWeightPopupEnabled(false)</span></span></li>
                     </ul>
                  </div>
               </div><a id="JSTGD479"></a><div class="props_rev_3"><a id="GUID-79AA3986-FEF1-49D7-B107-23A0070C8359" name="GUID-79AA3986-FEF1-49D7-B107-23A0070C8359"></a><h4 id="JSTGD-GUID-79AA3986-FEF1-49D7-B107-23A0070C8359" class="sect4">Use Synth</h4>
                  <div>
                     <p><code class="codeph">Synth</code> is an empty canvas.
                     </p>
                     <div class="section">
                        <p>To use <code class="codeph">Synth</code>, you must either provide a complete XML file that configures the look and feel, or extend <code class="codeph">SynthLookAndFeel</code> and provide your own <code class="codeph">SynthStyleFactory</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD480"></a><div class="props_rev_3"><a id="GUID-56FCD857-F29C-4661-9C86-197A39EEAE7D" name="GUID-56FCD857-F29C-4661-9C86-197A39EEAE7D"></a><h4 id="JSTGD-GUID-56FCD857-F29C-4661-9C86-197A39EEAE7D" class="sect4">Track Activity on Event Dispatch Thread</h4>
                  <div>
                     <p>If a Swing application tries to do too much on the event dispatch thread, then the application will appear sluggish and unresponsive.</p>
                     <div class="section">
                        <p>One way to detect this situation is to push a new <code class="codeph">EventQueue</code> that can output logging information if an event takes too long to process. This approach is not perfect in that it has problems with focus events and modality, but it is good for ad-hoc testing.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD481"></a><div class="props_rev_3"><a id="GUID-7D0AF4DE-3261-4EAC-8CCE-F7D9B09DB6F9" name="GUID-7D0AF4DE-3261-4EAC-8CCE-F7D9B09DB6F9"></a><h4 id="JSTGD-GUID-7D0AF4DE-3261-4EAC-8CCE-F7D9B09DB6F9" class="sect4">Specify Default Layout Manager</h4>
                  <div>
                     <p>Problems can be caused by differing default layout manager classes on a Swing component. </p>
                     <div class="section">
                        <p>For example, the default for the <code class="codeph">JPanel</code> class is <code class="codeph">FlowLayout</code>, but the default for the <code class="codeph">JFrame</code> class is <code class="codeph">BorderLayout</code>. This situation is easily fixed by specifying a <code class="codeph">LayoutManager</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD482"></a><div class="props_rev_3"><a id="GUID-6BC5FDA9-9DBE-4BCA-8635-E2FFD12F2C85" name="GUID-6BC5FDA9-9DBE-4BCA-8635-E2FFD12F2C85"></a><h4 id="JSTGD-GUID-6BC5FDA9-9DBE-4BCA-8635-E2FFD12F2C85" class="sect4">Listener Object Dispatched to Incorrect Component</h4>
                  <div>
                     <p><code class="codeph">MouseListener</code> objects are dispatched to the deepest component that has <code class="codeph">MouseListener</code> objects (or has enabled <code class="codeph">MouseEvent</code> objects).
                     </p>
                     <div class="section">
                        <p>A ramification of this is that if you attach a <code class="codeph">MouseListener</code> to a component whose descendants have <code class="codeph">MouseListener</code> objects, your <code class="codeph">MouseListener</code> object will never get called.
                        </p>
                        <p>This is easily reproduced with a composite component, like an editable <code class="codeph">JComboBox</code>. Because a <code class="codeph">JComboBox</code> has child components that have a <code class="codeph">MouseListener</code>, a <code class="codeph">MouseListener</code> attached to an editable <code class="codeph">JComboBox</code> will never get notified.
                        </p>
                        <p>If your <code class="codeph">MouseListener</code> suddenly stops getting events, then it could be the result of a change in the application whereby a descendant component now has a <code class="codeph">MouseListener</code>. A good way to check for this is to iterate over the descendants asking if they have any mouse listeners.
                        </p>
                        <p>A similar scenario occurs with the <code class="codeph">KeyListener</code> class. A <code class="codeph">KeyListener</code> object is dispatched only to the focused component.
                        </p>
                        <p>The <code class="codeph">JComboBox</code> case is another example of this situation. In the editable <code class="codeph">JComboBox</code> case the editor gets focus, not the <code class="codeph">JComboBox</code>. As a result, a <code class="codeph">KeyListener</code> attached to an editable <code class="codeph">JComboBox</code> will never get notified.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD483"></a><div class="props_rev_3"><a id="GUID-51E79950-8FDC-40CB-AFC9-5BE9849CC18F" name="GUID-51E79950-8FDC-40CB-AFC9-5BE9849CC18F"></a><h4 id="JSTGD-GUID-51E79950-8FDC-40CB-AFC9-5BE9849CC18F" class="sect4">Add a Component to Content Pane</h4>
                  <div>
                     <p>You must add a <code class="codeph">JFrame</code>, <code class="codeph">JWindow</code>, or <code class="codeph">JDialog</code> component to the content pane.
                     </p>
                     <div class="section">
                        <p>A component added to a top-level Swing component must go to the content pane, but the <code class="codeph">add</code> method (and a couple of other methods) on the <code class="codeph">JFrame</code>, <code class="codeph">JWindow</code>, and <code class="codeph">JDialog</code> classes redirect to the content pane. In other words, <span class="apiname">frame.getContentPane().add(component)</span> is the same as <span class="apiname">frame.add(component)</span>.
                        </p>
                        <p>The following methods redirect to the content pane for you: <span class="apiname">add</span> (and its variants), <span class="apiname">remove</span> (and its variants), and <span class="apiname">setLayout</span>.
                        </p>
                        <p>This is purely a convenience, but can cause confusion. In particular, <code class="codeph">getChildren</code>, <code class="codeph">getLayout</code>, and various others do not redirect to the content pane.
                        </p>
                        <p>This change affects <code class="codeph">LayoutManagers</code> that only work with one component, such as <code class="codeph">GroupLayout</code> and <code class="codeph">BoxLayout</code>. For example, new <span class="apiname">GroupLayout(frame)</span> will not work; instead, you must use <span class="apiname">GroupLayout(frame.getContentPane())</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD484"></a><div class="props_rev_3"><a id="GUID-DB8214A9-E866-4462-83C4-569DE74E7F77" name="GUID-DB8214A9-E866-4462-83C4-569DE74E7F77"></a><h4 id="JSTGD-GUID-DB8214A9-E866-4462-83C4-569DE74E7F77" class="sect4">Drag and Drop Support</h4>
                  <p>When using Swing you should use Swing's drag-and-drop support as provided by <code class="codeph">TransferHandler</code>. 
                  </p>
               </div><a id="JSTGD485"></a><div class="props_rev_3"><a id="GUID-2B32B552-38AB-4709-86DC-A1F6FBDDE911" name="GUID-2B32B552-38AB-4709-86DC-A1F6FBDDE911"></a><h4 id="JSTGD-GUID-2B32B552-38AB-4709-86DC-A1F6FBDDE911" class="sect4">One Parent for a Component</h4>
                  <div>
                     <p>Remember that a component can only exist in one parent at a time.</p>
                     <p>Problems occur when you share menu items between menus. For example, <code class="codeph">JMenuItem</code> is a component, and therefore can exist in only one menu at a time.
                     </p>
                  </div>
               </div><a id="JSTGD486"></a><div class="props_rev_3"><a id="GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09" name="GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09"></a><h4 id="JSTGD-GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09" class="sect4">JFileChooser Issues with Windows Shortcuts</h4>
                  <div>
                     <p>The <code class="codeph">JFileChooser</code> class does not support shortcuts on Windows OS (.lnk files).
                     </p>
                     <div class="section">
                        <p>Unlike the standard Windows file choosers, <code class="codeph">JFileChooser</code> does not allow the user to follow Windows shortcuts when browsing the file system, because it does not show the correct path to the file.
                        </p>
                        <p>To reproduce the problem, follow these steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li id="GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09__BACBCCGJ"><span>Create a text file on the Desktop called, for example, <code>MyFile.txt</code>. Open the text file and type some text, for example: <code class="codeph">This is the contents of MyFile.txt</code>.</span></li>
                        <li><span>Create a shortcut to the new text file in the following way: Drag the file with the right mouse button to another location on the Desktop and choose <span class="bold">Create Shortcut(s) here</span>.</span></li>
                        <li><span>Run the <code class="codeph">JfileChooser</code> test application, browse the Desktop, select <span class="bold">Shortcut to <code>MyFile.txt</code></span> and click <span class="bold">Open</span>.</span></li>
                        <li><span>The result file is <code><span class="variable" translate="no">PathToDesktop</span>\Shortcut</code> to <code>MyFile.txt.lnk</code>, but it should be <code><span class="variable" translate="no">PathToDesktop</span>\MyFile.txt</code>.</span></li>
                        <li><span>In addition, the contents of the result file in the text area shows the contents of the file shortcut to <code>MyFile.txt.lnk</code>, but the contents should be <code class="codeph">This is the contents of MyFile.txt</code>, which was typed in step <a href="swing.html#GUID-8694C211-C204-4B07-9969-3BD8F7EE1A09__BACBCCGJ">1</a>.</span></li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
