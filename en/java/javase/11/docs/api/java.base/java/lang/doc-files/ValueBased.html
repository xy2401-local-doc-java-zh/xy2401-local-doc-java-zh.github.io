<!doctype html>
<html lang="en">
<head>
  <title>Value-based Classes</title>
  <link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">

    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.created" content="2018-09-07T18:28:59+00:00">
    <meta name="dcterms.title" content="Java API Reference">
    <meta name="dcterms.category" content="java">
    <meta name="dcterms.isVersionOf" content="DOCS">
    <meta name="dcterms.product" content="en/java/javase/11">
    <meta name="dcterms.identifier" content="E98501-01">
    <meta name="dcterms.release" content="11">
  <script id="ssot-metadata" type="application/json"> {"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}} </script>
    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<h2 id="ValueBased">Value-based Classes</h2>

Some classes, such as <code>java.util.Optional</code> and
<code>java.time.LocalDateTime</code>, are <em>value-based</em>.  Instances of a
value-based class:
<ul>
    <li>are final and immutable (though may contain references to mutable
        objects);</li>
    <li>have implementations of <code>equals</code>,
        <code>hashCode</code>, and <code>toString</code> which are computed
        solely from the instance's state and not from its identity or the state
        of any other object or variable;</li>
    <li>make no use of identity-sensitive operations such as reference
        equality (<code>==</code>) between instances, identity hash code of
        instances, or synchronization on an instances's intrinsic lock;</li>
    <li>are considered equal solely based on <code>equals()</code>, not
        based on reference equality (<code>==</code>);</li>
    <li>do not have accessible constructors, but are instead instantiated
        through factory methods which make no committment as to the identity
        of returned instances;</li>
    <li>are <em>freely substitutable</em> when equal, meaning that interchanging
        any two instances <code>x</code> and <code>y</code> that are equal
        according to <code>equals()</code> in any computation or method
        invocation should produce no visible change in behavior.
    </li>
</ul>

<p>A program may produce unpredictable results if it attempts to distinguish two
    references to equal values of a value-based class, whether directly via reference
    equality or indirectly via an appeal to synchronization, identity hashing,
    serialization, or any other identity-sensitive mechanism.  Use of such
    identity-sensitive operations on instances of value-based classes may have
    unpredictable effects and should be avoided.</p>
<!-- Start SiteCatalyst code   -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code -->
<noscript>
<p>Scripting on this page tracks web page traffic, but does not change the content in any way.</p>
</noscript>
</body>
</html>
