<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content>
      <meta name="description" content>
      <title>Part I : Secure Authentication using the Java Authentication and Authorization Service (JAAS)</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="advanced-security-programming-java-se-authentication-secure-communication-and-single-sign1.html" title="Previous" type="text/html">
      <link rel="next" href="part-ii-secure-communications-using-java-se-security-api.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  
                    <script>var w=window;if(w.performance||w.mozPerformance||w.msPerformance||w.webkitPerformance){var d=document;AKSB=w.AKSB||{},AKSB.q=AKSB.q||[],AKSB.mark=AKSB.mark||function(e,_){AKSB.q.push(["mark",e,_||(new Date).getTime()])},AKSB.measure=AKSB.measure||function(e,_,t){AKSB.q.push(["measure",e,_,t||(new Date).getTime()])},AKSB.done=AKSB.done||function(e){AKSB.q.push(["done",e])},AKSB.mark("firstbyte",(new Date).getTime()),AKSB.prof={custid:"322179",ustr:"",originlat:"0",clientrtt:"2",ghostip:"23.212.3.15",ipv6:false,pct:"10",clientip:"45.78.37.67",requestid:"29eff8b1",region:"32996",protocol:"",blver:14,akM:"dsca",akN:"ae",akTT:"O",akTX:"1",akTI:"29eff8b1",ai:"206465",ra:"false",pmgn:"",pmgi:"",pmp:"",qc:""},function(e){var _=d.createElement("script");_.async="async",_.src=e;var t=d.getElementsByTagName("script"),t=t[t.length-1];t.parentNode.insertBefore(_,t)}(("https:"===d.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/aksb.min.js")}</script>
                    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="advanced-security-programming-java-se-authentication-secure-communication-and-single-sign1.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-ii-secure-communications-using-java-se-security-api.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Security Developer’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="java-generic-security-services-java-gss-api1.html" property="item" typeof="WebPage"><span property="name">Java Generic Security Services (Java GSS-API)</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-security-programming-java-se-authentication-secure-communication-and-single-sign1.html" property="item" typeof="WebPage"><span property="name">Advanced Security Programming in Java SE Authentication, Secure Communication and Single Sign-On</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Part I : Secure Authentication using the Java Authentication and Authorization Service (JAAS)</li>
            </ol>
            <a id="GUID-42416198-9AEE-428C-80EF-2A56488B5890" name="GUID-42416198-9AEE-428C-80EF-2A56488B5890"></a>
            
            <h2 id="JSSEC-GUID-42416198-9AEE-428C-80EF-2A56488B5890" class="sect2">Part I : Secure Authentication using the Java Authentication and Authorization Service (JAAS)</h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
            </div>
            <div class="sect2"><a id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8" name="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8"></a><h3 id="JSSEC-GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8" class="sect3">Exercise 1: Using the JAAS API</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-E9994D34-2836-48F7-8F5C-F02017AF45C9">Goal of This Exercise</p>
                     <p>The goal of this exercise is to learn how to use the Java Authentication and Authorization (JAAS) API to perform authentication.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-9344C4CA-D164-40BB-BF73-3212CF0A3E8C">Background for This Exercise</p>
                     <p>JAAS provides a standard pluggable authentication framework (PAM) for the Java platform. &nbsp;An application uses the JAAS API to perform <span class="italic">authentication</span> - the process of verifying the identity of the user who is using the application and gathering his identity information into a container called a <span class="italic">subject</span>. The application can then use the identity information in the subject along with the JAAS API to make <span class="italic">authorization</span> decisions, to decide whether the authenticated user is allowed to access protected resources or perform restricted actions. This exercise demonstrates JAAS Authentication. It does not demonstrate JAAS Authorization.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-7CA45720-387E-49CF-8D60-C13D8C6C376C">Resources for This Exercise</p>
                     <ul style="list-style-type: disc;">
                        <li><a href="java-authentication-and-authorization-service-jaas-reference-guide.html#GUID-2A935F5E-0803-411D-B6BC-F8C64D01A25C">Java Authentication and Authorization Service (JAAS) Reference Guide</a></li>
                        <li><a href="jaas-tutorials.html#GUID-272DB20A-B590-4B2E-BD60-7EF9EB54AB5A">JAAS Tutorials</a></li>
                        <li>JAAS Javadoc API documentation
                           <ul style="list-style-type: disc;">
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/package-summary.html" target="_blank"><span class="apiname">javax.security.auth</span></a></li>
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.callback</span></a></li>
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/kerberos/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.kerberos</span></a></li>
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/login/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.login</span></a></li>
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/spi/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.spi</span></a></li>
                              <li><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/x500/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.x500</span></a></li>
                           </ul>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-4B5F27AE-87FC-4516-BB45-9B3C31ED0B1C">Steps to Follow</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Read the <a href="source-code-advanced-security-programming-java-se-authentication-secure-communication-and-single-sig.html#GUID-40AF52E5-ECEA-4E5F-B0C1-35C150C7BB6E__JASS.JAVA-338B5916"><code>Jass.java</code></a> sample code. The code performs the following tasks:
                           </p>
                           <ol>
                              <li>Define a callback handler or use a predefined one.</li>
                              <li>Create a <span class="apiname">LoginContext</span> with a name that identifies which JAAS configuration entry to use.
                              </li>
                              <li>Perform the authentication.</li>
                              <li>Define the task that the authenticated user is to perform.</li>
                              <li>Perform the action as the authenticated user.</li>
                              <li>Log out.</li>
                           </ol>
                           <p><span class="apiname">Subject.doAs</span> will run the code defined in <code class="codeph">MyAction</code> as the authenticated user [lines 14-15]. This serves two purposes. First, code in <code class="codeph">MyAction</code> that requires identity information for authentication to a service could get it from the subject. This exercise demonstrates this use. Second, if <code class="codeph">MyAction</code> accesses any protected resources/operations, the identity information in the current subject would be used to make the corresponding access control decision. This second aspect is not covered in this exercise.
                           </p>
                        </li>
                        <li>
                           <p>Make sure that the <code class="codeph">%JAVA_HOME%/bin</code> is in the PATH environment variable.
                           </p>
                        </li>
                        <li>
                           <p>Compile the modified sample code. You will run this code in subsequent exercises after doing some set up. That ends this exercise.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-2D77DF62-8D31-4AA5-8EFC-484ED96C07D2">Summary</p>
                     <p>This exercise introduced the main classes of the JAAS APIs: <span class="apiname">LoginContext</span> and <span class="apiname">Subject</span>. You learned how to use <span class="apiname">LoginContext</span> to authenticate a user and collect its identity information in a Subject. You then learned how to use the Subject to perform an action as the authenticated user.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-1446370E-5019-4BD1-860A-22BAC1F13CF8__GUID-0F6469B2-4980-4EA4-927F-02B362E59285">Next Steps</p>
                     <p>Proceed to <a href="part-i-secure-authentication-using-java-authentication-and-authorization-service-jaas.html#GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A">Exercise 2: Configuring JAAS for Kerberos Authentication</a> to learn how to configure the sample application to use Kerberos for authentication.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A" name="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A"></a><h3 id="JSSEC-GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A" class="sect3">Exercise 2: Configuring JAAS for Kerberos Authentication</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-6CCAB707-D021-4D6D-8D24-86BACEAA3569">Goal of This Exercise</p>
                     <p>The goal of this exercise is to learn how to configure a JAAS application to use Kerberos for authentication.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-2017A336-3A46-4AEC-B1CB-A771598F4F60">Kerberos Background for This Exercise</p>
                     <p>Kerberos is an Internet standard protocol for trusted-third party authentication defined in <a href="http://www.ietf.org/rfc/rfc4120.txt" target="_blank">RFC 4120</a>. It is available on most modern computing platforms today, including Solaris, Windows, and Linux.
                     </p>
                     <p>The Kerberos architecture is centered around a trusted authentication service called the key distribution center, or KDC. Users and services in a Kerberos environment are referred to as principals; each principal shares a secret (such as a password) with the KDC. A principal &nbsp;authenticates to Kerberos by proving to the KDC that it knows the shared secret. If the authentication is successful, the KDC issues a ticket-granting-ticket (TGT) to the principal. When the principal subsequently wants to authenticate to a service on the network, such as a directory service or a file service, (thereby, acting as a "client" of the service), it gives the TGT to the KDC to obtain a service ticket to communicate with the service. Not only does the service ticket indicate the identities of the client and service principals, it also contains a session key that can be used by the client and service to subsequently establish secure communication. To authenticate to the service, the client sends the service ticket to the service. When the service receives the ticket, it decodes it using the secret it shares with the KDC.</p>
                     <p>In this architecture, a principal only authenticates directly (once) to the KDC. It authenticates indirectly to all other services via the use of service tickets. Service tickets are how the KDC vouches for the identity of a principal. The ability of a principal to access multiple secure services by performing explicit authentication only once is called single sign-on.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-B904A146-3B59-4F5C-B705-82EB9E714461">JAAS Background for This exercise</p>
                     <p>In JAAS, for a client principal, "logging into Kerberos" means acquiring the TGT and placing it in the Subject, so that it can be used for authentication with services that the client will access. For a service principal, "logging into Kerberos" means obtaining the secret keys that the service needs to decode incoming client authentication requests.</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-4049C11C-B693-48DC-AEB7-88F4F74B95E1">Resources for This Exercise</p>
                     <ul style="list-style-type: disc;">
                        <li><a href="java-authentication-and-authorization-service-jaas-loginmodule-developers-guide1.html#GUID-CB46C30D-FFF1-466F-B2F5-6DE0BD5DA43A">Java Authentication and Authorization Service (JAAS): LoginModule Developer's Guide</a></li>
                        <li><a href="http://www.ietf.org/rfc/rfc4120.txt" target="_blank">The Kerberos Network Authentication Service (v5)</a></li>
                        <li><a href="appendix-b-jaas-login-configuration-file.html#GUID-7EB80FA5-3C16-4016-AED6-0FC619F86F8E">Appendix B: JAAS Login Configuration File</a></li>
                        <li>Login module package Javadoc API documentation:<a href="https://docs.oracle.com/javase/10/docs/api/com/sun/security/auth/module/package-summary.html" target="_blank"><span class="apiname">com.sun.security.auth.module</span></a></li>
                        <li><a href="introduction-jaas-and-java-gss-api-tutorials1.html">Introduction to JAAS and Java GSS-API Tutorials</a></li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-F4783289-888A-490E-8173-C102BED99EB8">Steps to Follow</p>
                     <ol>
                        <li>
                           <p>Examine the <a href="source-code-advanced-security-programming-java-se-authentication-secure-communication-and-single-sig.html#GUID-40AF52E5-ECEA-4E5F-B0C1-35C150C7BB6E__JASS-KRB5.CONF-338B5E8A"><span class="apiname">jaas-krb5.conf</span></a> configuration file.
                           </p>
                           <p>This file contains two entries, one named <span class="italic">client</span> and one named <span class="italic">server</span>. The client entry indicates that the <span class="apiname">LoginContext</span> must use the <span class="bold"><span class="apiname">com.sun.security.auth.module.Krb5LoginModule</span></span>. The server entry indicates that the <span class="apiname">LoginContext</span> must use the same login module, and use keys from the <code>sample.keytab</code> file for the principal host/machineName.
                           </p>
                        </li>
                        <li>
                           <p>Determine the hostname of your machine by executing the hostname command.</p>
                        </li>
                        <li>
                           <p>Edit this file and change the entry for server principal to use the name of your machine. For example, if your machine name is j1hol-001, this line in the configuration file should look like this:</p><pre class="pre codeblock"><code>principal="host/j1hol-001"</code></pre></li>
                        <li>
                           <p>Perform client authentication by typing the following command:</p><pre class="pre codeblock"><code>% java -Djava.security.auth.login.config=jaas-krb5.conf Jaas client</code></pre><p>You will be prompted for a password. You should see the following output. Replace <span class="italic">password</span> with a password that is secure.
                           </p><pre class="pre codeblock"><code>Kerberos password for test: password
Authenticated principal: [test@J1LABS.EXAMPLE.COM]
Performing secure action...</code></pre></li>
                        <li>
                           <p>Perform server authentication by typing the following command:</p><pre class="pre codeblock"><code>% java -Djava.security.auth.login.config=jaas-krb5.conf Jaas server</code></pre><p>You should see the following output:</p><pre class="pre codeblock"><code>Authenticated principal: [host/j1hol-001@J1LABS.EXAMPLE.COM] Performing secure action...</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-A3CA32B1-138B-4EAB-91B6-9C12DA56A9DA">Summary</p>
                     <p>In this exercise, you learned how to configure a JAAS application to use a Kerberos login module, both as a client principal who enters his/her username/password interactively, and as a service principal who gets its keys from a <code>keytab</code> file.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-2079DC72-5A2E-46FE-978F-42D113FFA41A__GUID-A75F2C1F-8774-4194-9334-A17EC4368D2A">Next Steps</p>
                     <p>Proceed to <a href="part-ii-secure-communications-using-java-se-security-api.html#GUID-98B02DB0-13DB-4175-9485-3449E1A241B5">Part II : Secure Communications using the Java SE Security API</a> to learn how to establish secure communication channels using Java security APIs.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
