<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content>
      <meta name="description" content>
      <title>Part IV : Secure Communications Using Stronger Encryption Algorithms</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="part-iii-deploying-single-sign-kerberos-environment.html" title="Previous" type="text/html">
      <link rel="next" href="part-v-secure-authentication-using-spnego-java-gss-mechanism.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="part-iii-deploying-single-sign-kerberos-environment.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-v-secure-authentication-using-spnego-java-gss-mechanism.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Security Developer’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="java-generic-security-services-java-gss-api1.html" property="item" typeof="WebPage"><span property="name">Java Generic Security Services (Java GSS-API)</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="advanced-security-programming-java-se-authentication-secure-communication-and-single-sign1.html" property="item" typeof="WebPage"><span property="name">Advanced Security Programming in Java SE Authentication, Secure Communication and Single Sign-On</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Part IV : Secure Communications Using Stronger Encryption Algorithms</li>
            </ol>
            <a id="GUID-49820DF7-0DED-4C63-8DB8-89718501ADB1" name="GUID-49820DF7-0DED-4C63-8DB8-89718501ADB1"></a>
            
            <h2 id="JSSEC-GUID-49820DF7-0DED-4C63-8DB8-89718501ADB1" class="sect2">Part IV : Secure Communications Using Stronger Encryption Algorithms</h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
            </div>
            <div class="sect2"><a id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212" name="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212"></a><h3 id="JSSEC-GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212" class="sect3">Exercise 7: Configuring to Use Stronger Encryption Algorithms in a Kerberos Environment, to Secure the Communication</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p class="subhead2" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-52CA7BA9-FAE5-4D8D-8BBD-B49857EB8EC6">Goal of This Exercise</p>
                     <p>The goal of this exercise is to learn how to use various Kerberos encryption algorithms to secure the communication. Java GSS/Kerberos provides a wide range of encryption algorithms, including AES256, AES128, 3DES, RC4-HMAC, and DES.</p>
                     <div class="infoboxnote" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-534CA619-6431-4AF6-9EAF-9097B1DB13C7">
                        <p class="notep1">Note:</p>DES-based encryption types are disabled by default.
                     </div>
                     <p>The following is a list of all the encryption types supported by the Java GSS/Kerberos provider in Java SE:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>AES256-CTS</p>
                        </li>
                        <li>
                           <p>AES128-CTS</p>
                        </li>
                        <li>
                           <p>RC4-HMAC</p>
                        </li>
                        <li>
                           <p>DES3-CBC-SHA1</p>
                        </li>
                        <li>
                           <p>DES-CBC-MD5</p>
                        </li>
                        <li>
                           <p>DES-CBC-CRC</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-7ED217D4-783B-435A-8270-BEF1638E38EC">Steps to Follow</p>
                     <ol>
                        <li>
                           <p>Configure the Key Distribution Center (KDC) and update the Kerberos database.</p>
                           <p>First, you need to update to use the KDC that supports the required Kerberos encryption types, such as the latest version of Solaris or the latest version of Kerberos from the MIT distribution. If you are using Active Directory on a Windows platform, the latest version also supports RC4-HMAC and AES encryption types.</p>
                           <p>You need to update the Kerberos database to generate the new keys with stronger encryption algorithms. By default, Solaris 10 KDC will generate the keys for all the above encryption types listed. You can now create a keytab that will include all the keys for all the above encryption types.</p>
                           <div class="infoboxnote" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-91B456EC-8C26-4BBE-AE61-9229EAC72F4B">
                              <p class="notep1">Note:</p>
                              <p>If you want to use Windows 2000 KDC, you can configure to use the DES and RC4-HMAC encryption types that are available on Windows.</p>
                           </div>
                        </li>
                        <li>
                           <p>Edit the Kerberos configuration file (<a href="source-code-advanced-security-programming-java-se-authentication-secure-communication-and-single-sig.html#GUID-40AF52E5-ECEA-4E5F-B0C1-35C150C7BB6E__KRB5.CONF-338B7967"><code>krb5.conf</code></a>).
                           </p>
                           <p>You will need to edit the Kerberos configuration file in order to select the desired encryption types used. The required parameters that you will need to insert under the <code class="codeph">libdefaults</code> section of the Kerberos configuration file are listed below. For the purpose of this exercise, all the required entries have been added to a sample Kerberos configuration file included with the exercise, and the entries have been commented out. To enable the desired encryption type, you only need to uncomment the required entries.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>To enable AES256-CTS encryption type, add the following:</p><pre class="pre codeblock"><code>[libdefaults]
default_tkt_enctypes = aes256-cts
default_tgs_enctypes = aes256-cts
permitted_enctypes = aes256-cts</code></pre><div class="infoboxnote" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-03ECE450-E293-48CF-BD38-E899E97BFACB">
                                    <p class="notep1">Note:</p>
                                    <p>Solaris 10 11/06 and earlier does not support AES256 by default. You will need to install the following packages: SUNWcry, SUNWcryr, SUNWcryptoint.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>To enable AES128-CTS encryption type, add the following:</p><pre class="pre codeblock"><code>[libdefaults]
default_tkt_enctypes = aes128-cts
default_tgs_enctypes = aes128-cts
permitted_enctypes = aes128-cts</code></pre></li>
                              <li>
                                 <p>To enable RC4-HMAC encryption type, add the following:</p><pre class="pre codeblock"><code>[libdefaults]
default_tkt_enctypes = rc4-hmac
default_tgs_enctypes = rc4-hmac
permitted_enctypes = rc4-hmac</code></pre></li>
                              <li>
                                 <p>To enable DES3-CBC-SHA1 encryption type, add the following:</p><pre class="pre codeblock"><code>[libdefaults]
default_tkt_enctypes = des3-cbc-sha1
default_tgs_enctypes = des3-cbc-sha1
permitted_enctypes = des3-cbc-sha1</code></pre></li>
                           </ul>
                           <div class="infoboxnote" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-39D4BD8C-479F-40D7-81DB-7540B045316E">
                              <p class="notep1">Note:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If the above parameters are not added to the Kerberos configuration file, Solaris 10 11/06 and earlier will default to use AES128 enctype. If the exportable crypto packages have been installed, it will default to use AES256 enctype.</p>
                                 </li>
                                 <li>
                                    <p>Destroy any pre-existing Kerberos TGT in the ticket cache from the previous exercise as follows:</p><pre class="pre codeblock"><code>% kdestroy</code></pre></li>
                              </ul>
                           </div>
                        </li>
                        <li>
                           <p>Launch a new window and start the server using the updated <code>krb5.conf</code> as follows:
                           </p><pre class="pre codeblock"><code>% java -Djava.security.auth.login.config=jaas-krb5.conf \
-Djava.security.krb5.conf=krb5.conf GSSServer</code></pre></li>
                        <li>
                           <p>Run the client application using the updated <code>krb5.conf</code>. The <span class="apiname">GSSClient</span> class takes two parameters: the service name and the name of the server that the service is running on. For example, if the service is host running on the machine j1hol-001, use the following (provide a secure password when prompted):
                           </p><pre class="pre codeblock"><code>% java -Djava.security.auth.login.config=jaas-krb5.conf \
-Djava.security.krb5.conf=krb5.conf \
GSSClient host j1hol-001</code></pre></li>
                     </ol>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-29FBA28F-5E45-47FF-AB3A-CEB60871D212__GUID-6D13D681-7571-4FCC-B844-F506316D87F2">Summary</p>
                     <p>In this exercise, you learned how to write a client-server application that uses Java GSS API to authenticate and communicate securely using stronger Kerberos encryption algorithms. You can enable Kerberos debugging (<code class="codeph">-Dsun.security.krb5.debug=true</code>), to obtain information about the Kerberos encryption type used.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
