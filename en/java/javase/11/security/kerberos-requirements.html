<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Kerberos Requirements</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="more-things-you-can-do-java-gss-api-and-jaas.html" title="Previous" type="text/html">
      <link rel="next" href="troubleshooting.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="more-things-you-can-do-java-gss-api-and-jaas.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="troubleshooting.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Security Developer’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="java-generic-security-services-java-gss-api1.html" property="item" typeof="WebPage"><span property="name">Java Generic Security Services (Java GSS-API)</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-jaas-and-java-gss-api-tutorials1.html" property="item" typeof="WebPage"><span property="name">Introduction to JAAS and Java GSS-API Tutorials</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Kerberos Requirements</li>
            </ol>
            <a id="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998" name="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998"></a>
            
            <h2 id="JSSEC-GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998" class="sect2">Kerberos Requirements</h2>
         </header>
         <div class="ind">
            <div>
               <p>Kerberos Version 5 is used for both the authentication and secure communication aspects of the client and server applications developed in this tutorial. The reader is assumed to already be familiar with Kerberos. See the <a href="http://web.MIT.edu/kerberos/www/index.html" target="_blank">Kerberos reference documentation</a>.
               </p>
               <p>The JAAS framework, and the Kerberos mechanism required by the Java GSS-API methods, are built into JDKs from all vendors. The Kerberos LoginModule required for the JAAS authentication in this tutorial may not be available in all vendors' JDKs. We will be using the LoginModule for Kerberos provided by Oracle's JDK.</p>
               <p>In order to run the sample programs, you will need access to a Kerberos installation. As described in the following sections, you may also need a <code class="codeph">krb5.conf</code> Kerberos configuration file and an indication as to where that file is located.
               </p>
               <p>As with all Kerberos installations, a Kerberos Key Distribution Center (KDC) is required. It needs to contain the user name and password you will use to be authenticated to Kerberos.</p>
               <div class="infoboxnote" id="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998__GUID-4FC2940F-C2B5-4760-98EC-C22375CB0C22">
                  <p class="notep1">Note:</p>
                  <p>A KDC implementation is part of a Kerberos installation and not a part of the JDK.</p>
               </div>
               <p>As with most Kerberos installations, a Kerberos configuration file <code class="codeph">krb5.conf</code> is consulted to determine such things as the default realm and KDC. If you are using a Kerberos implementation that does not include a <code class="codeph">krb5.conf</code> file (such as one from Windows), you will either need to create one or use system properties as described in <a href="kerberos-requirements.html#GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7">Setting Properties to Indicate the Default Realm and KDC</a>.
               </p>
            </div>
            <div class="sect2"><a id="GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7" name="GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7"></a><h3 id="JSSEC-GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7" class="sect3">Setting Properties to Indicate the Default Realm and KDC</h3>
               <div>
                  <p>Typically, the default realm and the KDC for that realm are indicated in the Kerberos <code class="codeph">krb5.conf</code> configuration file. However, if you like, you can instead specify these values by setting the following system properties to indicate the realm and KDC, respectively:
                  </p><pre class="pre codeblock"><code>java.security.krb5.realm
java.security.krb5.kdc</code></pre><p>If you set one of these properties you must set them both.</p>
                  <p>Also note that if you set these properties, then no cross-realm authentication is possible unless a <code class="codeph">krb5.conf</code> file is also provided from which the additional information required for cross-realm authentication may be obtained.
                  </p>
                  <p>If you set values for these properties, then they override the default realm and KDC values specified in <code class="codeph">krb5.conf</code> (if such a file is found). The <code class="codeph">krb5.conf</code> file is still consulted if values for items other than the default realm and KDC are needed. If no <code class="codeph">krb5.conf</code> file is found, then the default values used for these items are implementation-specific.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641" name="GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641"></a><h3 id="JSSEC-GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641" class="sect3">Locating the krb5.conf Configuration File</h3>
               <div>
                  <p>The essential Kerberos configuration information is the default realm and the default KDC. As shown in <a href="kerberos-requirements.html#GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7">Setting Properties to Indicate the Default Realm and KDC</a>, if you set properties to indicate these values, they are not obtained from a <code class="codeph">krb5.conf</code> configuration file.
                  </p>
                  <p>If these properties do not have values set, or if other Kerberos configuration information is needed, an attempt is made to find the required information in a <code class="codeph">krb5.conf</code> file. The algorithm to locate the <code class="codeph">krb5.conf</code> file is the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If the system property <code class="codeph">java.security.krb5.conf</code> is set, its value is assumed to specify the path and file name.
                        </p>
                     </li>
                     <li>
                        <p>If that system property value is not set, then the configuration file is looked for in the directory</p>
                        <ul style="list-style-type: disc;">
                           <li><code class="codeph"><span class="variable" translate="no">&lt;java-home&gt;</span>\conf\security</code> (Windows)
                           </li>
                           <li><code class="codeph"><span class="variable" translate="no">&lt;java-home&gt;</span>/conf/security</code> (Solaris, Linux, and macOS)
                           </li>
                        </ul>
                        <p>Here <code class="codeph"><span class="variable" translate="no">&lt;java-home&gt;</span></code> refers to the directory where the JDK is installed.
                        </p>
                     </li>
                     <li>
                        <p>If the file is still not found, then an attempt is made to locate it as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li><code class="codeph">/etc/krb5/krb5.conf</code> (Solaris)
                           </li>
                           <li><code class="codeph">C:\Windows\krb5.ini</code> (Windows)
                           </li>
                           <li><code class="codeph">/etc/krb5.conf</code> (Linux)
                           </li>
                           <li><code>~/Library/Preferences/edu.mit.Kerberos</code>, <code>/Library/Preferences/edu.mit.Kerberos</code>, or <code>/etc/krb5.conf</code> (macOS)
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>If the file is still not found, and the configuration information being searched for is <span class="variable" translate="no">not</span> the default realm and KDC, then implementation-specific defaults are used. If, on the other hand, the configuration information being searched for is the default realm and KDC because they weren't specified in system properties, and the <code class="codeph">krb5.conf</code> file is not found either, then an exception is thrown.
                        </p>
                     </li>
                     <li>
                        <p>On Windows, if a <code>krb5.conf</code> file cannot be found or it does not contain settings for the default realm and its KDC, then the environment variables <code class="codeph">USERDNSDOMAIN</code> and <code class="codeph">LOGONSERVER</code> are used as the default realm and its KDC.
                        </p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A" name="GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A"></a><h3 id="JSSEC-GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A" class="sect3">Naming Conventions for Realm Names and Hostnames</h3>
               <div>
                  <p> By convention, all Kerberos realm names are uppercase and all DNS hostname and domain names are lowercase. On Windows, domains are also Kerberos realms; however, the realm name is always the uppercase version of the domain name. </p>
                  <p>Hostnames are case insensitive and by convention they are all lowercase. They must resolve to the same hostname on the client and server by their respective naming services.</p>
                  <p>However, in the Kerberos database hostnames are case sensitive. In all host-based Kerberos service principals in the KDC, hostnames are case-sensitive. The hostnames used in the Kerberos service principal names must exactly match the hostnames returned by the naming service. For example, if the naming service returns a fully qualified lowercased DNS hostname, such as <code class="codeph">raven.example.com</code>, then the administrator must use the same fully qualified lowercased DNS hostname when creating host-based principal names in the KDC: <code class="codeph">host/raven.example.com</code>.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9D76C533-8EF4-4417-884A-37C60FA233FC" name="GUID-9D76C533-8EF4-4417-884A-37C60FA233FC"></a><h3 id="JSSEC-GUID-9D76C533-8EF4-4417-884A-37C60FA233FC" class="sect3">Cross-Realm Authentication</h3>
               <div>
                  <p> In cross-realm authentication, a principal in one realm can authenticate to principals in another realm. </p>
                  <p>In Kerberos, cross-realm authentication is implemented by sharing an encryption key between two realms. The KDCs in two different realms share a special cross-realm secret; this secret is used to prove identity when crossing the boundary between realms.</p>
                  <p>The key that is shared is the Ticket Granting Service principal's key. Here's a typical Ticket Granting Service principal for a single realm:</p><pre class="pre codeblock"><code>ktbtgt/EXAMPLE.COM@EXAMPLE.COM
</code></pre><p>In cross realm authentication, two principals are created on each participating realm. For two realms, <code class="codeph">ENG.EAST.EXAMPLE.COM</code> and <code class="codeph">SALES.WEST.EXAMPLE.COM</code>, these principals would be: 
                  </p><pre class="pre codeblock"><code>krbtgt/ENG.EAST.EXAMPLE.COM@SALES.WEST.EXAMPLE.COM
krbtgt/SALES.WEST.EXAMPLE.COM@ENG.EAST.EXAMPLE.COM
</code></pre><p>These principals, known as remote Ticket Granting Server principals, must be created on both realms. </p>
                  <p>For a Windows KDC, the <code class="codeph">krbtgt</code> account is created automatically when a Windows domain is created. This account cannot be deleted and renamed.
                  </p>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>
