<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Card Terminal Interaction</title>
<meta name="generator" content="DITA Open Toolkit version 1.7.5" />
<meta name="dcterms.created" content="2015-05-27T21:10:48Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Card 3 Platform Programming Notes" />
<meta name="dcterms.identifier" content="E59598-01" />
<meta name="dcterms.isVersionOf" content="JCPCL" />
<meta name="dcterms.rights" content="Copyright &nbsp;&copy;&nbsp;1998, 2015, Oracle and/or its affiliates. All rights reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="generate_the_stubs.htm" title="Previous" type="text/html" />
<link rel="Next" href="add_security_support.htm" title="Next" type="text/html" />
<link rel="alternate" href="JCPCL.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED"></a> <span id="PAGE" style="display:none;">57/72</span> <!-- End Header --><a id="JCPCL157"></a><a id="JCPCL158"></a><a id="JCPCL159"></a><a id="JCPCL156"></a>
<h1 id="JCPCL-GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED" class="sect1">Card Terminal Interaction</h1>
<div>
<p>When a Java Card technology-enabled smart card is powered up, the card sends an ATR (Answer to Reset) to the terminal. The Card Accessor returns the value of the ATR to the client program (shown in <a href="card_terminal_interaction.htm#GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__GUID-49A812C6-7725-4247-BACC-2D7AED1C5708">Figure 3-1</a>).</p>
<div class="figure" id="GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__GUID-49A812C6-7725-4247-BACC-2D7AED1C5708">
<p class="titleinfigure"><a id="GUID-49A812C6-7725-4247-BACC-2D7AED1C5708"></a>Figure 3-1 Smart Card Sends an ATR to the Terminal</p>
<img width="344" height="56" src="img/GUID-83A5585D-75B6-45CA-84B5-80761ECE0B38-default.gif" alt="A flow diagram showing the smart card sending an ATR to a terminal as described in the previous text." title="A flow diagram showing the smart card sending an ATR to a terminal as described in the previous text." /><br />
<a href="img_text/description_of_the_illustration_devn3-1.gif.htm">Description of "Figure 3-1 Smart Card Sends an ATR to the Terminal"</a></div>
<!-- class="figure" -->
<p>When the <code>PurseClient</code> application calls the <code>selectApplet</code> method of <code>JavaCardRMIConnect</code>, it sends a <code>SELECT APDU</code> command to the card via the <code>CardAccessor</code> object. This results in a File Control Information (<code>FCI</code>) APDU response from the <code>RMIService</code> instance of <code>PurseApplet</code> on the card in a TLV (Tag Length Value) format that includes the initial reference remote object information (shown in <a href="card_terminal_interaction.htm#GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__BABDJHGH">Figure 3-2</a>).</p>
<div class="figure" id="GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__BABDJHGH">
<p class="titleinfigure"><a id="BABDJHGH"></a>Figure 3-2 Terminal Sends a SELECT Command to the Smart Card, Which Returns FCI</p>
<img width="344" height="81" src="img/GUID-24182CF1-9578-4272-8F73-6135CF0AF4A3-default.gif" alt="A flow diagram showing the terminal sending a SELECT command to a smart card that returns an FCI APDU as described in the previous text." title="A flow diagram showing the terminal sending a SELECT command to a smart card that returns an FCI APDU as described in the previous text." /><br />
<a href="img_text/description_of_the_illustration_devn3-2.gif.htm">Description of "Figure 3-2 Terminal Sends a SELECT Command to the Smart Card, Which Returns FCI"</a></div>
<!-- class="figure" -->
<p>Later, when the <code>PurseClient</code> application calls the <code>debit</code> method of the remote interface <code>Purse</code>, the <code>PurseImpl_Stub</code> object sends an <code>INVOKE</code> command to the card via the <code>CardAccessor</code> object, identifying the remote object reference, interface, method, and parameter data for method invocation. The <code>RMIService</code> instance of <code>PurseApplet</code> unmarshalls this information and invokes the <code>debit</code> method of the <code>PurseImpl</code> instance, and returns the return value in the response <code>RETURN</code> APDU (shown in <a href="card_terminal_interaction.htm#GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__BABDHCDF">Figure 3-3</a>).</p>
<div class="figure" id="GUID-CE3FCA87-609D-4345-ACE2-959E34C314ED__BABDHCDF">
<p class="titleinfigure"><a id="BABDHCDF"></a>Figure 3-3 Terminal Sends an INVOKE Command to the Smart Card, Which Returns a Value</p>
<img width="344" height="81" src="img/GUID-D2C652F3-1FE3-461F-9F74-417B3BB6DF56-default.gif" alt="A flow diagram showing the terminal sending an INVOKE command to a smart card that sends a return value as described in the previous text." title="A flow diagram showing the terminal sending an INVOKE command to a smart card that sends a return value as described in the previous text." /><br />
<a href="img_text/description_of_the_illustration_devn3-3.gif.htm">Description of "Figure 3-3 Terminal Sends an INVOKE Command to the Smart Card, Which Returns a Value"</a></div>
<!-- class="figure" --></div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment106">
<tr>
<td class="cellalignment113">
<table class="cellalignment111">
<tr>
<td class="cellalignment110"><a href="generate_the_stubs.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment110"><a href="add_security_support.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright &nbsp;&copy;&nbsp;1998, 2015, Oracle and/or its affiliates. All rights reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment115">
<table class="cellalignment109">
<tr>
<td class="cellalignment110"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment110"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment110"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
