<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="UTF-8" />
<title>Verifying CAP Files</title>
<meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)" />
<meta name="dcterms.created" content="2018-04-13T10:24:54Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="Java Card 3 Platform Development Kit User Guide, Classic Edition" />
<meta name="dcterms.identifier" content="E59602-03" />
<meta name="dcterms.isVersionOf" content="JCUGC" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;1998, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.html" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js" charset="UTF-8"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Glossary" href="glossary.htm" title="Glossary" type="text/html" />
<link rel="Prev" href="overview-verifying-cap-and-export-files.htm" title="Previous" type="text/html" />
<link rel="Next" href="verifying-export-files.htm" title="Next" type="text/html" />
<link rel="alternate" href="JCUGC.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-552992c80ef99c8d" async="async"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<a id="GUID-17E64623-70F8-4B06-AA86-B525A8837B08"></a> <span id="PAGE" style="display:none;">128/161</span> <!-- End Header -->
<a id="JCUGC343"></a><a id="JCUGC342"></a>
<h1 id="JCUGC-GUID-17E64623-70F8-4B06-AA86-B525A8837B08" class="sect1">Verifying CAP Files</h1>
<div>
<p>The <code class="codeph">verifycap</code> tool is used to verify a CAP file within the context of package's export file (if any) and the export files of imported packages. This verification confirms whether a CAP file is internally consistent, as defined in the <cite>Virtual Machine Specification, Java Card Platform, Version 3.0.5, Classic Edition</cite>, and consistent with a context in which it can reside in a Java Card technology-enabled device.</p>
<p>To ensure the integrity of the CAP file to be downloaded on a card, the verifier computes and outputs hash values for each of the required CAP file components. To output the hash values in a text file, specify the command line parameter <code class="codeph">-outfile <span class="variable">hash-file-path</span></code>. If the <code class="codeph">-outfile</code> parameter is not specified, the verifier outputs the hash values on the console output. A CAP file loader should compute the hash values for each of the required CAP components and verify them against the hash values produced by the verifier to assert the integrity of the CAP file being loaded on the card. The <code class="codeph">scriptgen</code> tool in the Java Card Development kit performs the hash computation and comparison before generating the download script for a CAP file. For more information about the <code class="codeph">scriptgen</code> tool, see <a href="running-scriptgen.htm#GUID-DE1A3EE9-317E-4FED-8370-86A58B73DC7C">Running scriptgen</a>.</p>
<p>Each individual export file is verified as a single unit. The scenario is shown in <a href="verifying-cap-files.htm#GUID-17E64623-70F8-4B06-AA86-B525A8837B08__BGBCFIFC">Figure 13-1</a>. In the figure, the package <code class="codeph">p2</code> CAP file is being verified. Package <code class="codeph">p2</code> has a dependency on package <code class="codeph">p1</code>, so the export file from package <code class="codeph">p1</code> is also input. The <code>p2.exp</code> file is only required if <code>p2.cap</code> exports any of its elements.</p>
<div class="figure" id="GUID-17E64623-70F8-4B06-AA86-B525A8837B08__BGBCFIFC">
<p class="titleinfigure">Figure 13-1 Verifying a CAP file</p>
<img width="318" height="204" src="img/verifycap.png" alt="Description of Figure 13-1 follows" title="Description of Figure 13-1 follows" /><br />
<a href="img_text/verifycap.htm">Description of "Figure 13-1 Verifying a CAP file"</a></div>
<!-- class="figure" --></div>
<a id="JCUGC345"></a><a id="JCUGC344"></a>
<div class="props_rev_3"><a id="GUID-AEDAB425-B305-40D4-81D4-0BA9CE804A10"></a>
<h2 id="JCUGC-GUID-AEDAB425-B305-40D4-81D4-0BA9CE804A10" class="sect2">Running verifycap</h2>
<div>
<div class="section">
<p>The file to invoke <code class="codeph">verifycap</code> is a batch file (<code class="codeph">verifycap.bat</code>) that you must run from a working directory of <span class="italic">JC_CLASSIC_HOME</span><code class="codeph">\bin</code> in order for the code to execute properly.</p>
<p>To run <code class="codeph">verifycap</code>:</p>
</div>
<!-- class="section" -->
<ol>
<li class="stepexpand"><span>Enter the following command (<a href="verifying-cap-files.htm#GUID-AEDAB425-B305-40D4-81D4-0BA9CE804A10__GUID-2783CF3E-4CD1-4350-8721-CD15B81AECDA" title="Provides a list and description of the verifycap command line arguments">Table 13-1</a> describes the available options):</span>
<div>
<p><code class="codeph">verifycap.bat</code> [<span class="italic">options</span>] <span class="italic">export-files</span> <span class="italic">CAP-file</span></p>
</div>
</li>
</ol>
<div class="section">
<div class="tblformal" id="GUID-AEDAB425-B305-40D4-81D4-0BA9CE804A10__GUID-2783CF3E-4CD1-4350-8721-CD15B81AECDA">
<p class="titleintable">Table 13-1 verifycap Command Line Arguments</p>
<table class="cellalignment12" title="verifycap Command Line Arguments" summary="Provides a list and description of the verifycap command line arguments">
<thead>
<tr class="cellalignment2">
<th class="cellalignment22" id="d37585e139">Argument</th>
<th class="cellalignment27" id="d37585e142">Description</th>
</tr>
</thead>
<tbody>
<tr class="cellalignment2">
<td class="cellalignment26" id="d37585e147" headers="d37585e139">
<p><span class="italic">export-files</span></p>
</td>
<td class="cellalignment28" headers="d37585e147 d37585e142">
<p>A list of export files of the packages that this CAP file uses.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment26" id="d37585e155" headers="d37585e139">
<p><span class="italic">CAP-files</span></p>
</td>
<td class="cellalignment28" headers="d37585e155 d37585e142">
<p>Name of the CAP file to be verified.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment26" id="d37585e163" headers="d37585e139">
<p><code class="codeph">-digest <span class="codeinlineitalic">digest-algorithm-name</span></code></p>
</td>
<td class="cellalignment28" headers="d37585e163 d37585e142">
<p>Specifies the digest algorithm to use for computing hash values for required CAP components. If this option is not specified or an invalid algorithm name is specified, the verifier uses SHA-256 as the default algorithm.</p>
</td>
</tr>
<tr class="cellalignment2">
<td class="cellalignment26" id="d37585e173" headers="d37585e139">
<p><code class="codeph">-outfile <span class="codeinlineitalic">hash-output-file-path</span></code></p>
</td>
<td class="cellalignment28" headers="d37585e173 d37585e142">
<p>Specifies the path to the text file that the verifier uses to output the computed hash values for the required CAP components. If this option is not specified, hash values are output to the system console.</p>
</td>
</tr>
</tbody>
</table>
</div>
<!-- class="inftblhruleinformal" -->
<p><a href="command-line-options-card-verifier-tools.htm#GUID-2F3E6B80-6811-4F9E-A9E4-A3CD24CFDBA0">Command Line Options for Off-Card Verifier Tools</a> describes additional <code class="codeph">verifycap</code> options.</p>
</div>
<!-- class="section" --></div>
</div>
</div>
<!-- class="ind" --><!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment1">
<tr>
<td class="cellalignment8">
<table class="cellalignment6">
<tr>
<td class="cellalignment5"><a href="overview-verifying-cap-and-export-files.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment5"><a href="verifying-export-files.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;1998, 2018, Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment10">
<table class="cellalignment4">
<tr>
<td class="cellalignment5"><a href="../index.html"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment5"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment5"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
